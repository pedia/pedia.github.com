
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>HeartOutside</title>
  <meta name="author" content="Ken">

  
  <meta name="description" content="苦于电影字幕显示异常，进而发现问题时由于字体导致的，在 FontBook 中能看到某些字缺失。 很多关键字体,如 AppleMyungjo，AppleGothic, Hiragino Kaku，Hiragino Mincho 系列基本都有问题。OS X 也未提供方法改变系统字体，工具软件如 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://log.heartoutside.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="HeartOutside" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">HeartOutside</a></h1>
  
    <h2>not yet</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:log.heartoutside.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/30/os-x-font-trouble/">OS X Font Trouble</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-30T18:08:00+08:00" pubdate data-updated="true">Aug 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>苦于电影字幕显示异常，进而发现问题时由于字体导致的，在 FontBook 中能看到某些字缺失。
<img src="/pic/fontbook-fail.png"></p>

<p>很多关键字体,如 AppleMyungjo，AppleGothic, Hiragino Kaku，Hiragino Mincho 系列基本都有问题。OS X 也未提供方法改变系统字体，工具软件如 TinkerTool 等也没有能改变中文字体的工具。</p>

<p>粗暴一些的做法，直接覆盖</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo cp a-true-type.ttf /System/Library/Fonts/AppleGothic.ttf</span></code></pre></td></tr></table></div></figure>


<p>就能解决问题。</p>

<p>推荐在号称对字体美感出名的 Apple 系统里安装 Microsoft YaHei Version 6.01 字体。</p>

<p>也推荐 <a href="http://zonble.github.com/tcfail/en.html">tcfail</a> 的解决方案。</p>

<p>English Version:</p>

<p>How to change OS X Chinese system font?</p>

<ul>
<li><p>Use FontBook find out which font ruin the Chinese word.</p></li>
<li><p>Copy a normal True Type Font file to replace it, like:</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo cp a-true-type.ttf /System/Library/Fonts/AppleGothic.ttf</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/11/nexus-flash/">Nexus Update 4.0.4(IMM761)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-11T10:00:00+08:00" pubdate data-updated="true">May 11<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我没有参考什么攻略，直接看<a href="https://developers.google.com/android/nexus/images">Google Nexus Images的文档</a>，
然后下载 <a href="https://developers.google.com/android/nexus/images#yakju">yakju</a>，</p>

<p>然后解开压缩包</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar zxf yakju-imm76i-factory-8001e72f.tgz</span></code></pre></td></tr></table></div></figure>


<p>然后执行</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd yakju-imm76i
</span><span class='line'>sudo ./flash-base.sh</span></code></pre></td></tr></table></div></figure>


<p>最后</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yakju-imm76i $ sudo fastboot -w update image-yakju-imm76i.zip
</span><span class='line'>archive does not contain 'boot.sig'
</span><span class='line'>archive does not contain 'recovery.sig'
</span><span class='line'>archive does not contain 'system.sig'
</span><span class='line'>--------------------------------------------
</span><span class='line'>Bootloader Version...: PRIMELA03
</span><span class='line'>Baseband Version.....: I9250XXLA2
</span><span class='line'>Serial Number........: 0--------------2
</span><span class='line'>--------------------------------------------
</span><span class='line'>checking product... OKAY
</span><span class='line'>checking version-bootloader... OKAY
</span><span class='line'>checking version-baseband... OKAY
</span><span class='line'>sending 'boot' (4148 KB)... OKAY
</span><span class='line'>writing 'boot'... OKAY
</span><span class='line'>sending 'recovery' (4478 KB)... OKAY
</span><span class='line'>writing 'recovery'... OKAY
</span><span class='line'>sending 'system' (316111 KB)... OKAY
</span><span class='line'>writing 'system'... OKAY
</span><span class='line'>erasing 'userdata'... OKAY
</span><span class='line'>erasing 'cache'... OKAY</span></code></pre></td></tr></table></div></figure>


<p>系统重新启动，成功 <br/>
<img src="/pic/nexus.png" width="360" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/02/collaboration-in-corp/">公司内部代码协作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-02T10:58:00+08:00" pubdate data-updated="true">May 2<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>公司内部，团队间不可避免的有代码互相访问的事情发生。</p>

<h2>普通方式</h2>

<p>提供者提供头文件和库供调用者实施访问，这是比较常见的方式。当然库有可能是静态库，动态库。</p>

<p>静态库要求双方编译环境，运行环境一致，否则就得提供多种环境的库文件。动态库要求稍微弱一些而已。</p>

<p>很多人会把别人的头文件进行封装，美其名曰为了<strong>屏蔽变化</strong>，虽说封装开销微乎其微，但是我尤其讨厌这么做。
这种事情甚至会出现在一个团队内的两个人间，一般这两人可能是独立设计。这是缺乏信任、沟通的结果。</p>

<p>如果只提供二进制，看不到代码，又不是经济方面的原因，那么这种公司可以离开了。</p>

<p>如果出现数次使用邮件、聊天软件传文件等方式交流代码，也无力改变，这种公司也可以考虑离开。</p>

<h2>远程调用</h2>

<p>提供者可以只提供 IDL 文件。
取决于远程调用的使用、部署方式等。工程间的依赖、接口的变更这都是需要解决的问题。</p>

<p>也可以进一步提供封装过服务发现、调用方式、错误处理等后的库。问题就和<strong>普通方式</strong>一致了。</p>

<h2>直接使用</h2>

<p>要求大家的代码在一颗代码树下，代码间能互相调用，工程间能引用。</p>

<p>假想公司内有个独立的防止 Spam 的小组，业务部门 Blog 需要使用他们的代码。</p>

<figure class='code'><figcaption><span>spam/check.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cp">#ifndef SPAM_CHECK_H__</span>
</span><span class='line'>
</span><span class='line'><span class="k">namespace</span> <span class="n">spam</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="kt">bool</span> <span class="n">Check</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">text</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>该工程产生 libcheck.a</p>

<figure class='code'><figcaption><span>blog/publish.cc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cp">#include &quot;spam/check.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">Post</span><span class="p">(...)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">spam</span><span class="o">::</span><span class="n">Check</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>调用方的工程文件需要声明</p>

<figure class='code'><figcaption><span>blog/blog.gyp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>  <span class="s1">&#39;dependencies&#39;</span> <span class="o">:</span> <span class="p">[</span><span class="s1">&#39;spam.gyp:check&#39;</span><span class="p">],</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://code.google.com/p/gyp">gyp</a> 为工程文件，最终生成 Makefile</p>

<p>Blog 编译时自动加入 -lcheck，一般静态链接发布。能如此做是有很多先决条件的：</p>

<ul>
<li><p>公司内一颗代码树，至少都拥有可读权限</p></li>
<li><p>每个团队间的代码不能互相影响，需要每个团队都得采用分支开发，保证主线是稳定，可发布版本</p></li>
<li><p>信息是开放的，每个团队的代码的变更其他团队应该能知道</p></li>
<li><p>公司内部有统一的良好的沟通工具，如 IRC, 邮件列表等</p></li>
</ul>


<p>还有其他规范，如</p>

<ul>
<li><p>统一的代码风格</p></li>
<li><p>目录规则、namespace 规则、冲突解决等。</p></li>
</ul>


<p>如果是远程调用，大致可以拆解为：服务发现、调用包装、错误处理等子项，每个子项也可以同理解决。</p>

<p>很多公司把代码的权限管理得相当不错，虽然我也能遵守，但是通常呢？</p>

<blockquote><p> 有能力的人不太在乎那些个代码，没有能力的呢？通常可能都玩不转那些个代码<br/>
 连Google都是内部开放代码，有什么理由制造层层障碍。这种公司也不值得留下。</p></blockquote>

<p>限制创造力的规则。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/28/high-power-smartphone/">High Power Smartphone</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-28T10:35:00+08:00" pubdate data-updated="true">Apr 28<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>收集了最近能找到的电池容量超过1500mAh的智能机的信息，列表如下。</p>

<table border="1">
    <tr>
      <td>
      </td>
      <td>
        battery(mAh)</td>
      <td>
        price(RMB Yuan)</td>
    </tr>
    <tr>
      <td>
        三星GALAXY SII</td>
      <td>
        1650</td>
      <td>
        2750</td>
    </tr>
    <tr>
      <td>
        索尼LT26i</td>
      <td>
        1750</td>
      <td>
        3600</td>
    </tr>
    <tr>
      <td>
        联想乐Phone K2</td>
      <td>
        1760</td>
      <td>
        2999</td>
    </tr>
    <tr>
      <td>
        摩托罗拉XT910</td>
      <td>
        1780</td>
      <td>
        3199</td>
    </tr>
    <tr>
      <td>
        HTC One X</td>
      <td>
        1800</td>
      <td>
        3950</td>
    </tr>
    <tr>
      <td>
        LGOptimus LTE</td>
      <td>
        1830</td>
      <td>
        2750</td>
    </tr>
    <tr>
      <td>
        华为U8860</td>
      <td>
        1930</td>
      <td>
        1899</td>
    </tr>
    <tr>
      <td>
        小米M1</td>
      <td>
        1930</td>
      <td>
        2430</td>
    </tr>
    <tr>
      <td>
        摩托罗拉XT910 MAXX</td>
      <td>
        3300</td>
      <td>
        4290</td>
    </tr>
    <tr>
      <td>
        三星GALAXY Note I9220</td>
      <td>
        2500</td>
      <td>
        4299</td>
    </tr>
    <tr>
      <td>
        酷派D539</td>
      <td>
        2500</td>
      <td>
        925</td>
    </tr>
    <tr>
      <td>
        华为S8600</td>
      <td>
        2000</td>
      <td>
        1798</td>
    </tr>
    <tr>
      <td>
        天语W800</td>
      <td>
        2000</td>
      <td>
        2980</td>
    </tr>
    <tr>
      <td>
        联想乐Phone P70</td>
      <td>
        2000</td>
      <td>
        989</td>
    </tr>
  </table>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/22/mawk-and-gawk/">Mawk and Gawk</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-22T15:37:00+08:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天发现 Debian 里的 awk 是 mawk，过程是发现一台机器上的 awk 执行报错</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> awk: line 2: function strftime never defined</span></code></pre></td></tr></table></div></figure>


<p>然后发现此 awk 原来是 mawk</p>

<p>Debian 可能有足够的原因：</p>

<blockquote><p>mawk is a very fast AWK implementation by Mike Brennan based on a byte code interpreter.</p></blockquote>

<p>引入 mawk 代替gawk，但是由于这两个版本的细微差别，肯定会困扰一些人。</p>

<p>还有一个类似的例子是 dash, 无数次以为脚本写错后，才把习惯改为 !/bin/bash。</p>

<p>竞争固然是好，这些批着同一件皮的东西有着这样、那样的差别，会让每个人都经历一次或多次查错的经验。</p>

<p>WTF!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/31/trivial-detail-in-facebook-messenger/">Trivial Detail in Facebook Messenger</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-31T11:23:00+08:00" pubdate data-updated="true">Dec 31<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I download <a href="https://www.facebook.com/help/messenger-for-windows">facebook messenger</a> from <a href="https://fbcdn_dragon-a.akamaihd.net/cfs-ak-ash4/84995/940/FacebookMessengerSetup.exe">here</a>. After install I found something interest.</p>

<p>First it&#8217;s a C++ managed CLR program. I <a href="http://stackoverflow.com/questions/7457371/why-is-winrt-unmanaged">think</a> running on Win8 is their main purpose.</p>

<p>Then I noticed it use a several open source library almost all from Google.</p>

<ul>
<li>omaha: Google open source for <a href="http://code.google.com/p/omaha">auto update</a>, a complicate weapon.</li>
<li>breakpad: <a href="http://code.google.com/p/google-breakpad/">crash report and dump analytics tools from Google</a>, I really love it.</li>
<li>gtest: <a href="http://code.google.com/p/googletest">Google unit test library</a>. Unit test is rarely seen in windows applications, I believe It&#8217;s high quality</li>
<li>gecko: core of firefox from <a href="http://mozilla.org/">mozilla.org</a>, It&#8217;s a wise choice.</li>
</ul>


<p>about certification signing:</p>

<ul>
<li>FacebookMessenger.exe not signed.</li>
<li>FacebookUpdate.exe signed.</li>
<li>FacebookCrashHandler.exe signed.</li>
</ul>


<p>Sadly, I never saw the interface, because it(verion 2.0.4373.0) keep quit abnormally on my winxp.
<img src="/pic/facebook-messenger-for-windows-done-716270.png" alt="facebook main window preview" /></p>

<p>Whatever, it&#8217;s absolutely above average in Windows application technology.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/23/csdn-password-leak-under/">密码泄漏事件下的冰山</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-23T12:45:00+08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>曝光在大众面前的 CSDN 密码泄漏事件只是冰山一角，很小的一角。
如开始时间，其实攻击从2011年<strong>初</strong>就开始了，下载文件里的日期一般不会做假：
-    2011-01-31 22:46 100W.txt
-    2011-03-08 20:49 duowan_user.txt
-    2011-10-16 01:02 www.csdn.net.sql</p>

<p>至这些密码泄漏开始，利用这些数据获取其他价值的的攻击行为从来就没有停止过，差不多同时就听闻各大网站被攻击。至 CSDN 事件曝光这是很长的一段时间，但是各大公司都选择了沉默应对攻击。</p>

<p>对历次泄漏数据汇总后，共计有 24249858 个合法邮件地址</p>

<blockquote><pre><code>24249858 total
10874262 qq.com
 5811878 163.com
 2362741 126.com
 1259566 sina.com
  780195 yahoo.com.cn
  644629 hotmail.com
  474650 sohu.com
  301836 yahoo.cn
  284507 tom.com
  195086 21cn.com
  193720 gmail.com
  165742 vip.qq.com
  161241 yahoo.com
   93434 yeah.net
   88933 eyou.com
   79438 sina.com.cn
   64147 139.com
   61092 yahoo.com.tw
   46959 msn.com
   42924 163.net
   40649 live.cn
   26327 263.net
   26000 foxmail.com
   24563 yahoo.com.hk
   18414 vip.sina.com
   17923 sina.cn
   16093 sogou.com
   15333 citiz.net
   13412 mail.china.com
   11049 chinaren.com
    8239 etang.com
    7201 189.cn
    6759 live.com
    5731 vip.163.com
    5324 china.com
    3993 msn.cn
    3480 2008.sina.com
    2251 371.net
    1648 yahoo.co.jp
    1603 netease.com
    1389 elong.com
    1132 mail.ustc.edu.cn
     820 sjtu.edu.cn
     645 x263.net
     564 zte.com.cn
     526 hotmail.com.tw
     522 neusoft.com
     453 bjtu.edu.cn
     406 huawei.com
     202 bofthew.com
     149 owlpic.com
      78 uggsrock.com
</code></pre></blockquote>

<p>邮件服务提供商似乎没有太多作为，Gmail 提示不要使用相同密码，我使用的国内的邮件服务商(qq,163)没有类似举动。</p>

<p>各个邮件服务提供商都没有表现出应有的社会责任，未及时告知用户安全问题，导致整个中国互联网集体容颜扫地。</p>

<p>在表现上，各邮件服务提供商反应也不尽相同。
*   QQ 每个登录都有验证码
*   163 貌似没有采取什么措施，截至12月22日还能用其中信息登录他人账户成功</p>

<p>不管如何，这次事件各互联网公司应对策略都有了长足的进步，验证码等技术得到了提升。</p>

<p>真正的冰山是利用这些信息的非法获利，各大互联网公司都有虚拟货币，甚至支付宝，有什么样的故事呢，我不得而知。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/19/question-to-a-startup-team/">Question to a Startup Team</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-19T09:21:00+08:00" pubdate data-updated="true">Dec 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li>你得到的投资有多少？按计划能支撑多久？</li>
<li>技术人员的总股份有多少？</li>
<li>如果这个项目失败了会怎么样？</li>
</ol>


<p>关键问题是第3个，鲜有第一个项目就成功的，做好失败的准备，整个团队继续努力，成功的机会更大。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/30/digest/">Digest</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-30T20:23:00+08:00" pubdate data-updated="true">Nov 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><a href="http://www.gutenberg.org/">Project Gutenberg</a> DVD 里有404本中文书.</li>
<li>gcc 4.6 support -Ofast optimization level.</li>
<li>American Reunion 4 will arrive in 2012</li>
<li>Puppet Labs earn $8.5 million investment. <a href="http://puppetlabs.com/blog/company/vmware-google-and-cisco-invest-in-puppet-labs/">#</a></li>
<li>百度云 <a href="http://yun.baidu.com/">#</a></li>
<li><a href="http://www.ultimatepp.org/">Upp</a> 界面技术应该比QQ&#8221;蜂鸟&#8221;(Hummer)的界面技术更强一些</li>
<li>在公司里揭疮疤，需要非凡的技巧，不然会成为众矢之的抑或埋下祸根;只有圣人能干这事。</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/08/nc-and-tar-play-nice-then/">Nc and Tar Play Nice Then</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-08T09:20:00+08:00" pubdate data-updated="true">Nov 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Convenience transfer file with nc, just like:<br />
receiver:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> nc -l -p 2000 &gt; filename
</span></code></pre></td></tr></table></div></figure>


<p>sender:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> cat filename | nc 192.168.1.1 2000
</span></code></pre></td></tr></table></div></figure>


<p>It is working fine for single file.</p>

<p>Tar archiving also convenience too. <br />
pack:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> tar c .
</span></code></pre></td></tr></table></div></figure>


<p>extract:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> tar x
</span></code></pre></td></tr></table></div></figure>


<p>Combine them together, seem not work fine.<br />
receiver</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> nc -l -p 2000 | tar x
</span></code></pre></td></tr></table></div></figure>


<p>sender</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> tar c .  | nc 192.168.1.1 2000
</span></code></pre></td></tr></table></div></figure>


<p>I think the reason is tar result is block by block, and there is
nothing mean EOF, so tar x never know when to close the pipe.</p>

<p>I also found #1 use cpio, tar - even not work fine.
I tried rsync -e, either not work.</p>

<p>A geek nearby provide a solution: tar -ix<br />
in man tar:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='man'><span class='line'>-i, --ignore-zeros
</span><span class='line'>             ignore blocks of zeros in archive (normally mean EOF)
</span></code></pre></td></tr></table></div></figure>


<p>It work perfect.<br />
receiver</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> nc -l -p 2000 | tar -ix
</span></code></pre></td></tr></table></div></figure>


<p>sender</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> tar c .  | nc 192.168.1.1 2000
</span></code></pre></td></tr></table></div></figure>


<p>TODO: read source code of tar, find out what zero blocks really mean.</p>

<p>[1] http://ask.metafilter.com/133905/Why-did-tar-and-nc-not-play-nice</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/30/os-x-font-trouble/">OS X Font Trouble</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/11/nexus-flash/">Nexus Update 4.0.4(IMM761)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/02/collaboration-in-corp/">公司内部代码协作</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/28/high-power-smartphone/">high power smartphone</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/22/mawk-and-gawk/">mawk and gawk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/31/trivial-detail-in-facebook-messenger/">trivial detail in facebook messenger</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/23/csdn-password-leak-under/">密码泄漏事件下的冰山</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("boostguy", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/boostguy" class="twitter-follow-button" data-show-count="false">Follow @boostguy</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Ken -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'heartoutside';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
