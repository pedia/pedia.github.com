<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: facebook | HeartOutside]]></title>
  <link href="http://log.heartoutside.com/blog/categories/facebook/atom.xml" rel="self"/>
  <link href="http://log.heartoutside.com/"/>
  <updated>2012-04-28T11:00:31+08:00</updated>
  <id>http://log.heartoutside.com/</id>
  <author>
    <name><![CDATA[Ken]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[A Day in the Life of Facebook Operations]]></title>
    <link href="http://log.heartoutside.com/blog/2010/06/29/a-day-in-the-life-of-facebook-operations/"/>
    <updated>2010-06-29T11:14:00+08:00</updated>
    <id>http://log.heartoutside.com/blog/2010/06/29/a-day-in-the-life-of-facebook-operations</id>
    <content type="html"><![CDATA[<h2>How big Facebook is?</h2>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClZ1kgIbBI/AAAAAAAAFWs/IjkL-G9uAF8/s320/fb_1.png" /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClZ4ntQCYI/AAAAAAAAFW0/QlyO87wEsN4/s320/fb_2.png" /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClZ5yksdII/AAAAAAAAFW8/jkR4A1lyiWI/s320/fb_3.png" /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClZ9ev6egI/AAAAAAAAFXE/CLzrJntOp78/s320/fb_4.png" /></p>

<p>and servers, 60K?</p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClgijuptCI/AAAAAAAAFYE/NiiQcWNYOFk/s320/fb_6_server.png" /></p>

<h2>Rapid Growth</h2>

<p><img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClZ-e2wyMI/AAAAAAAAFXM/okv4H7W76hc/s320/fb_5_growth.png" /><br /></p>

<br />


<p>正在俄勒冈建立第3个数据中心<br />
<img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClc1HhX4sI/AAAAAAAAFXU/h_oapa2Vhgs/s320/fb_7_DC.png" /></p>

<h2>architect</h2>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClc6OOnkyI/AAAAAAAAFXk/hCkCJ5voqFM/s320/fb_arch.png" /><br /></p>

<br />


<p>Hiphop for PHP<br /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClc5G1-dZI/AAAAAAAAFXc/G9FOgaK-xhs/s320/fb_7_php.png" />memcached 300+TB live data in RAM<br />
<img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClhFwKDqiI/AAAAAAAAFYM/O3U3lWEkvH8/s320/fb_9_memcached.png" />
<img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClhG_ySqCI/AAAAAAAAFYU/OZpWZkhxUDY/s320/fb_10_services.png" />All services are independent.<br /></p>

<p><img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClc7h6bXII/AAAAAAAAFXs/li-GVSNKLKg/s320/fb_arch2.png" /></p>

<h2>Configure Managment</h2>

<p>use CFengine 3<br />
<img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClc-5zkzjI/AAAAAAAAFX0/YVEFJjhzHuc/s320/fb_cfengine.png" /><br />
Deployment</p>

<p>we focus on web push.<br />
Use BitTorrent to deploy source code, It's very fast. <br /></p>

<p><img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TCldGKDdrmI/AAAAAAAAFX8/wnZ86Su-m_g/s320/fb_webpush.png" /><br /></p>

<br />


<br />


<br />


<p>一般开发模式可能是 Engineering/QA/Operations，但是我们没有QA，因为沟通成本太高<br />
我们的Engineers write,and deploy their own code, 能够快速关注性能问题，流量等<br />
运营人员‘embedded’ int oengineering teams，来更好的做好架构决策，更好的理解产品<br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCliNPdHmKI/AAAAAAAAFYc/3AL0JQhaVC8/s320/fb_14_engineering.png" /><br /></p>

<br />


<p>Change logging<br />
所做的操作都记录在案，大部分更新时间都在凌晨1点<br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCliT9U0O9I/AAAAAAAAFYk/ZuHLLt1i4Vs/s320/fb_15_change_logging.png" /><br /></p>

<h2>Monitor and Metrics</h2>

<p>Ganglia is very Fast.<br />
<img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClig79cXfI/AAAAAAAAFYs/aqbI5QkF19Q/s320/fb_16_monitor.png" />
<img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClijJ3VlGI/AAAAAAAAFY0/5bnB2jPKn4A/s320/fb_17_monitor2.png" /><br />
another graph tool ODS <br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCli2cVKxqI/AAAAAAAAFZE/Xdr4OLpD_AI/s320/fb_19_ods2.png" /><br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCliltk5tNI/AAAAAAAAFY8/sdOJjgKLg8Q/s320/fb_18_ganglia.png" /><br />
We basically use Nagios.<br /></p>

<h2>Aggregation</h2>

<p><img border="0" src="http://4.bp.blogspot.com/_CZ0niZQI8-o/TCli_LG0kDI/AAAAAAAAFZM/HSfWEp8m_PU/s320/fb_20_alarm.png" /><br /></p>

<br />


<h2>How we do it</h2>

<p>Constant Growth<br />
Constant Failure<br />
Logical Units<br />
servers, racks, clusters, datacenters<br />
Constant Communication<br />
Everyone use IRC<br /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TCljJ21jt4I/AAAAAAAAFZU/wj7EoG2iIOE/s320/fb_21_communiction.png" /><br /></p>

<h2>Small Teams</h2>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TCljTPe2YwI/AAAAAAAAFZc/e61xS_fRftI/s320/fb_22_users.png" /><br /></p>

<br />


<p>Recap<br /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TCljZRhB8mI/AAAAAAAAFZk/vGW1HOEeN94/s320/fb_23_recap.png" /><br />
screenshot from <a href="http://www.youtube.com/watch?v=T-Xr_PJdNmQ&amp;amp;feature=player_embedded#%21">youtube.</a></p>
]]></content>
  </entry>
  
</feed>
