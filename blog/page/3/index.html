
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>HeartOutside</title>
  <meta name="author" content="Ken">

  
  <meta name="description" content="from 第一财经周刊官方博客 by 第一财经周刊 &nbsp; &ldquo;史上最快的公司&rdquo;Groupon正以少见的激进姿态进入中国，并且拉上了强横的腾讯。&nbsp; 文｜CBN 记者 郭颖哲 龚鸿燕 杨轩&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://log.heartoutside.com/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="HeartOutside" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">HeartOutside</a></h1>
  
    <h2>not yet</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:log.heartoutside.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/22/crazy-groupon/">疯狂的Groupon</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-22T22:44:26+08:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>    <span>from <a href="https://www.google.com/reader/view/feed/http%3A%2F%2Fcbn.weekly.blog.163.com%2Frss%2F" target="_blank">第一财经周刊官方博客</a></span> <span>by <span>第一财经周刊</span></span></p>


<p>    <p>        <p>            <p>                <p>                    <p>                        <img src="http://img616.ph.126.net/OGN2DTaRxtj30og-iIWKCw==/1985524485718749297.jpg" alt="疯狂的Groupon - 第一财经周刊 - 第一财经周刊官方博客"></p>
                    <p>&nbsp;</p>
                    <p>&ldquo;史上最快的公司&rdquo;Groupon正以少见的激进姿态进入中国，并且拉上了强横的腾讯。&nbsp;</p>
                    <p>文｜CBN 记者 郭颖哲 龚鸿燕 杨轩&nbsp; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 实习记者 孙天<br />
制图｜陈杨</p>
                    <p>&nbsp;</p>
                    <p>2011年1月的一天下午，一通陌生电话打到&ldquo;满座网&rdquo;的前台，带去了令人开心的消息&mdash;这家&ldquo;新开张的礼品公司&rdquo;希望让满座网的全体员工试吃它的巧克力产品。但是，免费巧克力需要凭一条内含电子券的手机短信获取，因此它需要得到满座网的通讯录。<br />
 前台小姐表示很乐意帮这个忙。几分钟后，拨打这通电话的人便轻松得到了这家在中国销售规模位列前五名的团购网站所有员工的联系方式。后来，感到事有蹊跷 的满座网COO王珂回拨了该号码，结果令他很震惊&mdash;这并不是什么礼品公司，而是国际知名人力资源公司万宝盛华的中国总?部。<br />
 &ldquo;谁都知道，万宝盛华是受雇于Groupon的。&rdquo;王珂说，他感到原本还有些像是隔空喊话的Groupon入华之事，一下子逼到了眼前。<br />
 没错，史上成长最快的公司Groupon的确已经来了，而且有一个让中国互联网创业公司心惊胆战的合作伙伴&mdash;腾讯。2月1日，域名 &ldquo;gaopeng.com&rdquo;的注册信息显示，这个域名已经被转至腾讯名下，注册人是欧阳云。这位腾讯公司的高管如今已是Groupon和腾讯合资公司的 CEO。此前，Groupon.cn已经被国内团购网站团宝网抢注。一月中旬，《第一财经周刊》记者曾在Groupon位于北京乐城中心B座的办公室与其 沟通，欧阳云以不方便为由拒绝了采访。一同在场的Groupon中国区副总裁Mads  Faurholt则简单表示&ldquo;目前（1月中），我们已经招了大概五六十人，事情进行得很顺利，网站很快就能看到了。我们的确是跟腾讯集团在合作，股权比例 是50：50。&rdquo;Groupon从负责海外业务的原City  Deal的团队里抽调了五六名欧洲人过来，他们非常年轻，德国人Faurholt身居要职，也不过二十六七岁。<br />
 1月24日，Groupon宣 布新一轮融资完成，其创始人Andrew  Mason意气风发地出现在各大媒体上，宣布其刚刚融到的9.5亿美金中&ldquo;将有大部分花在亚洲，尤其是中国&rdquo;。算上前两轮融资，这家成立两年多的团购网站 已经融资11.15亿美元，估值更是高达47.5亿美元。<br />
 美元不会给中国团购网站带来太多压力，真正让它们担忧的是Groupon接下来可能 的疯狂攻势。1月26日，在德国慕尼黑参加DLD大会的李开复发微博称：&ldquo;Groupon用超过10%的股份收购了德国 Citydeal；Citydeal侵略性很强，在欧洲曾经双倍薪水从对手抢人，打赢后又大批解雇；Citydeal  团队国际扩展执行力很强，所以在Groupon内部他们已经成为国际扩展的负责人，因此德国人在主导Groupon在华发?展。&rdquo;<br />
 Citydeal创始人便是德国人Oliver  Samwer，他的另一个身份是Groupon国际事务总裁。Citydeal创办于去年1月份，5月份便被Groupon收购。正是凭借上述侵略性很强 的策略，Citydeal短短几个月内便把业务扩张到欧洲18个国家的140多个城市。<br />
 按照Mason的说法，在考虑以什么样的方式进入中国上面，他们的确纠结过好一段时间。原本，Groupon打算像进入其他国际市场那样，通过控股当地规模较大团购网站的方式进入中国。2010年10月，他们曾经投石探路，却发现中国的团购网站们并不领情。<br />
 几乎未带任何商量口吻地，它群发Email给国内团购网站的CEO，告诉他们被期望于10月的某个具体的日期和时间，集体出现在香港国际机场的一家咖啡厅同Groupon的代表见面。<br />
 作为唯一到场的国内团购网站CEO，拉手网创始人吴波从30几岁的德国人Oliver Samwer嘴里听到了十足的狠话：&ldquo;如果你不跟着我们干，那就等着被活埋吧。&rdquo;<br />
 彼时，几乎每家身后都站着为了将来上市时赚取几十倍利润而不惜砸出重金的VC大佬，&ldquo;弹药&rdquo;充足的国内团购网站没有谁能够接受Groupon的控股要求。<br />
 Groupon不愿意就此铩羽而归，谈判破裂后立即买下了香港、新加坡和菲律宾三地最大的地方团购网站。到了12月，拉手、美团分别获得了金沙江创投和红杉资本数千万美元的投资。不久后，国内规模前十的团购网站纷纷完成第二轮融资，团队规模和落地城市都在成倍增加。<br />
 拉手网的团队在两个月内扩张到1500人，并在100多个城市落地。但吴波在忙碌之中依然没有忘记Groupon对中国市场虎视眈眈这件事。而恰巧由于 拉手网的股东之一泰山投资也是欧洲一家团购网站DailyDeal的战略投资人，经介绍，Daily  Deal的高管给吴波写了邮件详细介绍了Groupon德国团队的&ldquo;焦土政策&rdquo;&mdash;&ldquo;你们的员工会先被两三倍于现在的薪水挖走，但接下来他们便会失望，因为 对方会强制他们同意更改合同上的数额，不行就把他们开掉，这些人就彻底被这个行业抛弃了。&rdquo;这与李开复的微博传递了同样的信息。<br />
 1月11日前 后，一份Mads  Faurholt写给某私立大学学生就业中心的邮件在网上被不停地转载，里面表示Groupon&ldquo;融到了许多钱，愿意给员工有竞争力的薪水&rdquo;。几天后，更 有进一步的消息称，Groupon已经来了，临时办公室就设在北京国贸附近，并且初步建起了一支几十人的团队，而他们中的大部分人，Faurholt说， 就像Groupon中国的十人核心成员一样曾有知名投资银行或咨询公司的从业经历。<br />
 在离2011年春节还剩不到半个月的时候，战火一下子烧到了中国团购网站的家门口。终极Boss降临，就像电影里演的那样，个头是英雄们的好几倍，并且全副武装、气势汹?汹。<br />
 事实上，早在招聘邮件泄露之前的1月初，Groupon在中国的疯狂招聘便已开始。欧阳云为合资公司找来了一家长期合作的猎头，希望帮助Groupon 中国在三个月内招聘到1500人。当时，大家曾有一个礼拜始终在商量招人的方案，甚至到了谈价格准备签合同的地步，尽管猎头公司的高管也觉得&ldquo;欧洲来的那 帮小伙子都是坐在地上跟人谈事&rdquo;挺不靠谱，但工作总归是不断在推进当中。<br />
 然而事情很快有了变化。1月8日，John.Ho将自己的 Linkedin页面介绍改为&ldquo;Groupon中国的第一个员工&rdquo;。这个年近五十的香港人曾任亚信科技的技术总监，并且主导了这家公司&ldquo;在2000年那场 纳斯达克在亚洲最为成功的IPO&rdquo;，长期生活在北京。他到任Groupon中国的COO不到20个小时后，原来的方案就被推翻，Groupon方面提出要 大规模地接触猎头。<br />
 到1月中旬，国内有几十家大大小小的猎头都已经接到了来自Groupon的&ldquo;不可能的任务&rdquo;&mdash;不仅时间非常短、所需的人员 数非常多，而且由于合资公司还没注册下来，其工作合同是不具备法律效力的。万宝盛华的加入还算让事情有了个过渡之法，这家全球最大的派遣公司可能跟 Groupon全球签订了协议，让新招进来的人得以暂时用&ldquo;派遣员&rdquo;的身份为Groupon中国工作。<br />
 即便如此，猎头公司们还是发现很难安下 心来给Groupon中国招人。&ldquo;我们希望引导客户做一个清晰思路，首先对组织构架进行确认，再弄清楚自己对每一个职位的要求，这样才能布局整个招聘。&rdquo; 其中一家不愿意透露名字的猎头公司告诉《第一财经周刊》，&ldquo;但客户连个JD（Jobs  Description，即职位描述）都没给，简单来说，他们就是什么人都要。&rdquo;<br />
 Groupon只是简单告诉这些猎头，他们需在3月份之前为 北京、上海、广州、深圳四个一线城市的站点分别招纳50到80人，兼覆盖成都、杭州、济南等7个二线城市，&ldquo;但就连他们的地方办事处组织架构、分工是什 么，我们都不知道。&rdquo;该猎头说，&ldquo;或许连他们自己也没有想好。&rdquo;<br />
 猎头们虽然有些找不到北，但广撒网还是起到了一定的效果。Groupon招人 的消息很快在微博、豆瓣等SNS社区以及各个科技博客、招聘圈子网站里传播开来。在发布招聘消息后，跟帖数量以每天几十个增加着，感兴趣者不乏来自雅虎、 微软等IT巨擘的工程师以及一些小型本土团购网站的BD。<br />
 陈忱不同于这些有互联网或者销售经历的人，事实上，从2010年7月本科毕业以后， 她一直是以翻译文书为生的自由职业者。但是，为了将来能进一所有名气的美国商学院上学，她必须想办法进入一家&ldquo;美国人一听就知道&rdquo;的公司。&ldquo;觉得 Groupon跟我的需求挺匹配的，经历一下也不错。&rdquo;但是，在投了简历几天没有回音之后，她主动来到Groupon设在北京乐城中心B座的办公室。<br />
 陈忱并没有看到想象中的热闹景象，Groupon的办公室还没完全装修好，&ldquo;右手边的大房间好像还是空的，没有开灯&rdquo;，不时有神色匆忙的外国人或者中国 人走来走去，只有绿底的公司Logo和立在地上的招聘广告告诉她，她找对地方了。这并不容易，因为Groupon并没有公开他们的办公地址，&ldquo;甚至大楼的 前台都还不知道有这样一家新搬进来的公司&rdquo;。<br />
 这一次&ldquo;霸面&rdquo;经历居然非常顺利。&ldquo;我就跟一高一矮两个老外站在他们前台聊了会儿。我刚递上简 历，还没怎么介绍自己，他们就特别热情地表示&lsquo;我们需要大量的销售，你敢于这样自己过来推销自己，就很有做好销售的潜质&rsquo;。&rdquo;陈忱觉得这种态度很轻率， &ldquo;好像恨不得马上要你来上班似?的。&rdquo;<br />
 接下来，面试她的人开始主动推销自己，试图让她对Groupon的光明前景深信不疑。他告诉陈忱，Groupon在世界很多地方都有分公司，都是从零开始，都很成功，中国可能跟这些市场不一样，但是中国的很多特点在别的市场里也有，他们会把这些经验拿到中国来用。<br />
 &ldquo;他们还说会建立本地化的团队，跟中国的大公司合作，就是QQ。&rdquo;陈忱回忆道，&ldquo;那个矮一点的最后还强调说，Groupon有用不尽的钱，到今年5月，它一定会做成中国第?一。&rdquo;<br />
 聊了不到十分钟，对方便问陈忱能否马上来上班，哪怕是先做兼职也可以。&ldquo;他们太缺人了，我甚至怀疑他们根本就不进行筛选。&rdquo;陈忱最终决定放弃，继续等待另外几家大公司的笔试通知。<br />
 随着招聘的深入，猎头接到越来越多候选人的投诉。&ldquo;他们抱怨Groupon不靠谱，&rdquo;前文提到的猎头公司高管说，&ldquo;按照指定的面试时间和地点去到那里， 却见不着约定的面试官，要么就是整个过程中面试官不停地换人，毫无章法可言。&rdquo;更让人感到不安的是Groupon虽然急着把人招进来，但对大部分应聘者都 没有给出具体的职位，此前传说中给BD的高达8000元起薪，在3到6个月不等的试用期内也要减半。<br />
 &ldquo;别说是那些候选人，这样的混乱我们也深 有体会。&rdquo;猎头方面对《第一财经周刊》表示，跟Groupon接洽的两周以来，对它的对外途径和内部分工仍无从知晓。&ldquo;我们公司各个级别的人都可能被他们 接触，而且他们一个公司各个级别的人也都来和我接触，前前后后一共有5个人之多，并且那些主管每个人分工都一直在变，今天管这茬明天管那茬，毫无章法可 言。&rdquo;<br />
 对此，Groupon方面一直坚持告诉猎头&ldquo;你们只管找人，把每天面试安排得满满当当就好，至于其他事，我们会自己决定&rdquo;。<br />
 猎头方面感到非常为难，如果对候选人不负责任，太多的投诉将影响他们的商誉。但是，那几个欧洲人小伙子显得那么干劲十足，他们穿着方便的休闲T恤和牛仔 裤每天忙上忙下，无论是面试还是商量把点铺到什么城市、谈下什么商户，都是一脸热切的表情，&ldquo;那感觉就像是一群刚刚创业的大学毕业生，全然没有大公司的样 子。&rdquo;<br />
 &ldquo;诚意倒是毋庸置疑，但他们根本不知道该如何跟猎头合作。&rdquo;接受《第一财经周刊》采访的两家猎头，为Groupon服务了不到一个月，便先后放弃了这个单子。据悉，目前仍然坚持的猎头只剩下七八家。<br />
 招聘方越来越迫切，一些有互联网从业经历的面试者像传销一样被要求发展数十人进入Groupon。而采取各种途径获取本土竞争对手销售人员联系方式的，也不只万宝盛华一家。<br />
 吴波春节前告诉《第一财经周刊》，当时拉手网的BD已有六成被Groupon请来的猎头电话垂询过了。&ldquo;但是目前还没有谁离开。&rdquo;这家号称国内规模最大 的团购网站，有1000多人的庞大销售团队，被认为是Groupon挖角最大的一座人力资源&ldquo;金矿&rdquo;。&ldquo;如果有人要走，也得等年后吧。&rdquo;吴波坦言自己也不 是完全有把握。<br />
 针对疯狂招人的Groupon，吴波的拉手网和满座网、F团等几家较大的团购网站共同建立了一个概念上的联盟以期抵制&ldquo;被挖 角&rdquo;。&ldquo;过去我们都在互相挖角，现在拉手网号召大家都停下来，我们把来自DailyDeal的邮件翻译成中文给员工们看，让他们了解Groupon的做 法，并且以提高福利的形式提升忠诚度。&rdquo;而更重要的一个杀手锏是&mdash;联盟中的十几家团购网站将永不录用跳槽到Groupon的员工。<br />
 &ldquo;可别像美 国的投资人那样被Groupon忽悠了。&rdquo;摩根大通的一位VP表示，如果Groupon春季IPO的消息确切，那么在这个时候是否进入了中国市场会在很大 程度上影响它的估值。&ldquo;从零开始，不考虑盈利，短时间内快速拿出好看的数字，他们不急才怪。这样的做法你们不觉得似曾相识?么？&rdquo;<br />
 1月26 日，加入未满1个月的Groupon中国区市场部副总裁任鑫离职，这位曾在新蛋网中国负责过网络营销并在其全球总部工作过的公司人被认为是电子商务营销方 面的专家，他在艾瑞网开有专栏，其撰写的Mars  Opinion电子商务博客也颇具影响力。&ldquo;回到酒店，继续干活。如果一家公司能让快要辞职的员工还愿意投入大量时间精力为它工作，这本身也说明了这家公 司工作的吸引力，也说明了这个员工对于公司和团队的正面态度。&rdquo;在当天稍晚一些的一篇微博中，任鑫如此写道。<br />
 Groupon在中国的未来表 现，或许还要看合作方腾讯对合资公司有多大投入。除了域名和指派一名CEO以外，腾讯目前并未将已有的团购业务并入合资公司。对此，John.Ho在回复 给《第一财经周刊》的邮件中表示，&ldquo;我希望大家能够从初期招聘的乱象、竞争对手的紧张和害怕情绪等一大堆影响因素中分辨出事实真相。对于一家刚刚进入中国 市场两周的公司而言，我觉得Groupon已经做得很好了。&rdquo;</p>
                    <p>&nbsp;</p>
                    <p>Groupon的疯狂涨势</p>
                    <p>2008年11月<br />
安德里&middot;梅森创建Groupon，总部位于芝加哥</p>
                    <p>2009年<br />
用户总数200万<br />
业务覆盖美国本土<br />
收入8500万美元</p>
                    <p>2009年6月<br />
网站实现盈亏平衡，利润率高达30%</p>
                    <p>2009年12月<br />
融资3000万美元</p>
                    <p>2010年5月<br />
收购德国团购网站Citydeal，其创始人Oliver Samwer成为Groupon国际事务总裁。</p>
                    <p>2010年<br />
用户总数5000万<br />
业务覆盖35个国家<br />
收入6亿美元</p>
                    <p>2010年4月<br />
融资1.35亿美元<br />
估值13.5亿美元</p>
                    <p>2011年1月<br />
融资9.5亿美元<br />
估值47.5亿美元<br />
进入中国市场</p>
                    <p>更多精彩请关注：http://www.cbnweek.com/</p>
                </p>
            </p>
        </p>
    </p>
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/16/end-technology-architecture-debate/">终结技术架构争论</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-16T18:17:00+08:00" pubdate data-updated="true">Feb 16<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Quora.com 是facebook CTO离开后的创业项目，现在已经有不小成就，在美国流量排名已经达到634名<br />
<img border="0" src="http://traffic.alexa.com/graph?&amp;w=400&amp;h=220&amp;o=f&amp;c=1&amp;y=r&amp;b=ffffff&amp;n=666666&amp;r=2y&amp;u=quora.com&amp;" />&nbsp;作为成就了Facebook技术体系的人，又有机会从头构建技术体系，其选择必然有所参考价值。<br /></p>

<h2>Quora并没有继续沿用 PHP</h2>

<p><a href="http://www.quora.com/What-are-the-crawling-horrors-of-PHP">PHP 某些糟糕的语言特性</a><br />
<a href="http://www.quora.com/Do-Facebook-engineers-enjoy-programming-in-PHP">Facebook 工程师喜欢PHP么</a><br /></p>

<h2>而是<a href="http://www.quora.com/Why-did-Quora-choose-Python-for-its-development">选择了 Python</a></h2>

<blockquote><p>Python was a language that Charlie and I both knew reasonably well  (though I know it a lot better now than I did when we started). We also  briefly considered C#, Java, and Scala. The biggest issues with Python  are speed and the lack of typechecking.<br /></p>

<p>We decided that Python was fast enough for most of what we need to do  (since we push our performance-critical code to backend servers written  in C++ whenever possible). As far as typechecking, we ended up writing  very thorough unit tests which are worth writing anyway, and achieve  most of the same goals. We also had a lot of confidence that Python  would continue to evolve in a direction that would be good for the life  of our codebase, having watched it evolve over the last 5 years.<br /></p>

<p>So  far, we&#8217;ve been pretty happy with the choice. There&#8217;s a small selection  bias, but all of the employees who&#8217;d been working with other languages  in the past have been happy to transition to Python, especially those  coming from PHP. Since starting the following things have happened:</p></blockquote>

<ul><li>Python  2.6 got to the point where enough of the libraries we used were  compatible with it, and we made a very easy transition to it.</li>
<li><span class="qlink_container"><a href="http://www.quora.com/Tornado-web-framework">Tornado (web framework)</a></span>&nbsp;was released as open source, and we moved our live updating web service to that.</li>
<li><span class="qlink_container"><a href="http://www.quora.com/PyPy">PyPy</a></span>&nbsp;got to the point where it looks like it will eventually be usable and will give us a significant speedup.</li>
<li>Python data structures map well to JavaScript data structures so  marshaling data between the browser and the server is straightforward  and easy. &nbsp;This is really nice since Quora involves a lot of  interactions between the client and server that aren&#8217;t page loads.</li>
<li>Python  code tends to be very readable and since we wanted to be able to work  on the site with a bunch of people, this was important.</li>
<li>There  are lots of other libraries that are written in Python so its easy to  incorporate things like custom mail servers, task queues, etc. into the  rest of our codebase.</li>
</ul>


<h2>为何没有选择Java</h2>

<blockquote><p>For a lot of little reasons, Java programs end up being longer and more  painful to write than the equivalent Python programs. It&#8217;s also harder  to interoperate with non-Java stuff.&nbsp;Scala had a lot of the downsides of  Java and the JVM, although it wasn&#8217;t quite as bad. The language seemed a  little too new and like it would bring some unnecessary risk (for  example, who knows how good will support be in 10 years).</p></blockquote>

<h2>没有选择 C#</h2>

<blockquote><p>C# seemed pretty promising. As a programming language, it&#8217;s great, but:<br />
* We  didn&#8217;t want to be on the Microsoft stack. We were up for learning  something new, and MS SQL Server actually seemed pretty good, but we  knew we&#8217;d need to integrate with lots of open source code that has only  second-class support for .NET, if it supports it at all. Also, most of  the best engineers these days are used to open source stuff.
* We  didn&#8217;t want to take the risk of being on Mono (an open source  implementation of C#/.NET). It&#8217;s not clear how long funding will be  around for that project, and I&#8217;d heard of various performance problems.  Plus, it seemed like everything else in the C# ecosystem would assume we  were on the Microsoft stack.</p></blockquote>

<h2>数据库选择 MySQL</h2>

<p>使用 Memcache 作为数据库前面的cache<br />
据说Quora实现了两个 C++ 的服务，采用 Thrift 作为远程调用和语言粘合剂<br />
Pylons 为 web framework<br />
Tornado 实现 Long Polling(Comet)<br />
采用 JQuery 为 Javascript 基础库，还有 JQuery UI<br />
HAProxy Load-Balancing<br />
Nginx as reverse-proxy server<br /></p>

<p>&#8212;&#8212;-感言分割线&#8212;&#8212;&#8212;&#8212;<br />
有很多人说“选择什么语言都一样”，是的，我很赞成，这话我也常说。但是选择语言后，之后的影响是深远的，乃至于思维理念、人都会不一样。这是一句空话。<br />
至此在我内心关于架构的争论结束了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/15/do-you-know-what-is-the-process-using-the-swap/">能知道究竟是那个进程使用了swap吗？</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-15T20:40:40+08:00" pubdate data-updated="true">Feb 15<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>昨天有同学问了这个问题<br />
我查了一下：<br />
top 显示关于内存的信息<br />
Mem:&nbsp;&nbsp; 1984888k total,&nbsp;&nbsp; 867772k used,&nbsp; 1117116k free,&nbsp;&nbsp;&nbsp; 88520k buffers<br />
Swap:&nbsp; 7201788k total,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0k used,&nbsp; 7201788k free,&nbsp;&nbsp; 295756k cached<br />
     <br />
其中 swap 信息来自于 /proc/meminfo<br />
SwapTotal:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7201788 kB<br />
SwapFree:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7201788 kB<br />
     <br />
是 kernel 内页使用情况的真实反映：<br />
mm/swapfile.c:1710: val-&gt;totalswap = total_swap_pages + nr_to_be_unused;<br />
     <br />
top 貌似也能显示每个进程的 SWAP 信息：<br />
其值来自（402为进城id）：<br />
/proc/402/task/402/stat or /proc/402/statm<br />
数值分别是:<br />
size, resident, share, trs, lrs, drs, dt<br />
     <br />
     <strong>其值不可能是真实的swap信息</strong>，计算方式是<br />
case P_SWP:<br />
&nbsp; MKCOL(scale_num(PAGES_TO_KB(p-&gt;size - p-&gt;resident), w, s));<br />
&nbsp; break;<br />
     <br />
     <span style="color: rgb(128,128,128);">我想如果内核的mm模块不报告page的进程信息，那么压根就没有地方能准确得到&ldquo;那个进程使用了swap&rdquo;信息，后来在 htop 的faq 里找到了佐证： http://htop.sourceforge.net/index.php?page=faq</span></p>


<p>[update]<br />
不知为何，我机器上的代码居然是2006年的，那时还没有以下方法呢</p>


<p>2008年在 /proc/pid/smaps 添加了 Swap 信息(account swap entries)<br />
最早的实现方法是遍历了所有的page, 如果 is_swap_pte, 就记录为 swap<br />
     <br />
还有一个更精确的计算是/proc/pid/pagemap，但是是二进制的</p>


<p>&nbsp;* /proc/pid/pagemap - an array mapping virtual pages to pfns<br />
&nbsp;*<br />
&nbsp;* For each page in the address space, this file contains one 64-bit entry<br />
&nbsp;* consisting of the following:<br />
&nbsp;*<br />
&nbsp;* Bits 0-55&nbsp; page frame number (PFN) if present<br />
&nbsp;* Bits 0-4&nbsp;&nbsp; swap type if swapped<br />
&nbsp;* Bits 5-55&nbsp; swap offset if swapped<br />
&nbsp;* Bits 55-60 page shift (page size = 1&lt;&lt;page shift)<br />
&nbsp;* Bit&nbsp; 61&nbsp;&nbsp;&nbsp; reserved for future use<br />
&nbsp;* Bit&nbsp; 62&nbsp;&nbsp;&nbsp; page swapped<br />
&nbsp;* Bit&nbsp; 63&nbsp;&nbsp;&nbsp; page present</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/10/nokias-new-ceo-stephen-elop-we-are-standing-on-a-burning-platform/">诺基亚新上任的 CEO Stephen Elop：我们正站在一个熊熊燃烧的平台上</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-10T23:33:31+08:00" pubdate data-updated="true">Feb 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">新官上任的三把火能点燃诺基亚吗？<a href="http://www.36kr.com/" target="_blank">36氪</a>对这封邮件进行了编译，或许你可以从中找到答案，以下为邮件正文：</p>


<blockquote>    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">大家好，</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">有这样一个故事，有一个人在北海的石油平台上工作，一天晚上被一声爆炸巨响惊醒，整个石油平台都着火了。他瞬间被火焰包围。穿过浓烟和热气，他勉强走出混乱，走到了平台边缘。当他从平台上往下看时，看到的只有黑暗、冰冷、令人生畏的大西洋海水。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">火焰不断靠近他，他必须在几秒内做出反应。他可以站在平台上，被熊熊大火烧死。或者，他可以从30米高的平台上跳进冰冷的海水里。他站在一个&ldquo;燃烧的平台&rdquo;上，并且他必须做出选择。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">他决定跳。这事出乎意料。在一般情况下，他从未想过要跳进冰冷的海水。但当时并非一般情况，他的平台着火了。他跳进海水，活了下来。在获救之后，他表示一个&ldquo;燃烧的平台&rdquo;导致他的行为发生了急剧变化。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">我们也站在一个&ldquo;燃烧的平台&rdquo;上，并且我们必须决定如何改变我们的行为。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">在过去几年中，我和你分享过来自股东、运营商、开发者、供应商和员工的声音。今天，我要分享一下我的理解和我的信念。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">我认为我们正站在一个燃烧的平台上。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">并且，我们面临着多处爆炸，我们面临着多个热点，让我们周围的大火更加凶猛。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">比如来自竞争对手的强大热量，其速度之快超乎想像。苹果通过重新定义智能手机、把开发者吸引到一个封闭而又异常强大的生态圈中颠覆了市场。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">2008 年，在300美元以上手机中，苹果市场份额为25%；到2010年增加到61%。2010年第四季度的年市盈增长率达到了78%。苹果证明，只要设计出 色，消费者就愿意购买体验绝佳的高价手机，开发者也愿意为其开发应用。苹果颠覆了市场，并且现在苹果统治着高端市场。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">然后是Android。在大约2年的时间里，Android平台吸引了应用开发者、服务提供商和硬件厂商。Android从高端入门，目前正在赢得中端市场，并且很快他们会转向100欧元以下的手机。Google已经成为一支举足轻重的力量，在核心中融入了大量业内创新。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">我们再来看看低端市场。2008年，MediaTek 开始提供全套的手机芯片组参考设计，这让中国深圳的厂商可以快速生产手机。目前全球三分之一以上的手机来自这个生态圈，侵蚀了我们在新兴市场的份额。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">竞争对手在我们的市场份额上放火，那么诺基亚在做什么呢？我们落后了，我们错过了重大趋势，并且我们浪费了时间。当时我们认为我们的决定是对的；但是事后我们才发现我们已经落后几年时间。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">2007年第一步iPhone问世，而我们目前还没有一款与之相媲美的手机。Android刚刚出现两年多，但本周他们的智能手机销量超过了我们。难以置信。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">我们诺基亚内部有一些天才的创新，但我们没有将其迅速推向市场。我们曾认为MeeGo可能会成为一个赢得高端手机市场的平台。但是，以目前的速度，到2011年年底，我们或许只能推出一款MeeGo手机。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">在 中端市场我们有塞班。事实证明塞班在北美等领先市场没有竞争力。此外，事实证明塞班是一个越来越难对付的开发环境，无法满足源源不断的用户需求，导致产品 开放速度变慢，并且在拖了硬件平台的后腿。所以，如果我们还像以前那样，我们将更加落后，而我们的竞争对手将更加领先。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">在低端市场，中国贴牌厂商开发手机的速度十分惊人，用一名诺基亚员工半开玩笑的话说，连制作一个幻灯片演示稿的时间都用不了。他们更快、更便宜，他们正在挑战我们。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">并且真正让人不安的是我们甚至没有拿起合适的武器反抗。我们仍然习惯于采用针对不同价格市场推出不同手机的战略。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">设 备之战现在已经成为生态圈之战，生态圈不仅包括硬件和软件，而且还包括开发者、应用、电子商务、搜索、社交应用、位置服务、统一通信等内容。我们的竞争对 手并不是靠设备夺取我们的市场份额的；他们靠的是一个完整的生态圈。这意味着我们不得不决定如何创建、催生或加入一个生态圈。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">这是我们需要做出的决定之一。与此同时，我们已经失去了市场份额，失去了用户的青睐，失去了时间。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">周二，标准普尔称他们将把我们的A长期和A-1短期评级列入消极信用观察列表。上周Moody也做出了类似举动。这大概意味着在未来几周，他们将对诺基亚进行分析，并可能做出信用评级降级决定。这些信用机构会什么要这么做呢？因为他们担心我们的竞争力。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">诺基亚的消费者偏爱度在全球下滑。在英国，诺基亚品牌偏爱度已经降至20%，比如去年下降了8个百分点。这意味着只有五分之一英国人更喜欢诺基亚手机。诺基亚在其它市场也日益式微，包括诺基亚的传统地盘：俄罗斯、德国、印尼、阿联酋等。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">我们是如何走到今天这一步的？为什么当周围世界不断进步时我们却落在了后面？</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">这是我努力想搞清楚的。我想至少部分原因在于我们诺基亚的内部态度。当我们的平台熊熊燃烧时，我们火上浇油。我相信我们一直缺乏问责制和领导力带领公司走过这些变革时代，我们有过一系列失误，我们创新的速度一直不够，我们缺乏内部合作。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">诺基亚，我们的平台正在熊熊燃烧。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">我们正在寻找出路，一条可以重建市场领导地位的路。当我们在2月11日分享新战略时，那将是变革公司的重大举措。但我相信，齐心协力，我们能够面对前面的挑战。齐心协力，我们可以选择塑造未来。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">燃烧的平台让站在平台上的人改变了自己的行为，做出大胆、勇敢的决定，迈向未知的未来。他活了下来，有机会讲述自己的经历。现在，我们也有一个绝佳的机会去做类似的事情。</p>
    <p style="margin: 0.0px 0.0px 1.5em;padding: 0.0px;border-width: 0.0px;outline-width: 0.0px;font-size: 14.0px;text-align: justify;">Stephen。</p>
</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/10/my-work-mode/">我的工作模式</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-10T15:03:00+08:00" pubdate data-updated="true">Feb 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我有两台计算机，一台是 Windows XP，另外一台是 32bit Ubuntu。 设置了一些环境，让工作顺畅一些。</p>

<h2>Samba 共享 Ubuntu 下的工作目录，Windows 共享访问</h2>

<p>好处： 代码只有一份，一次修改，两个地方同时生效。通常在 linux 下操作文件、代码库，需要写大量代码时才会使用 windows。<br /></p>

<p></div>在 windows 下把 linux下的工作目录映射为一个逻辑盘<br />
<img border="0" height="156" src="/pic/windows_share.png" width="200" /></p>

<p>Samba 配置 /etc/samba/smb.conf 内容大致为</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[global]
</span><span class='line'>server string = xxx
</span><span class='line'>dns proxy = no
</span><span class='line'>encrypt passwords = true
</span><span class='line'>passdb backend = tdbsam
</span><span class='line'>obey pam restrictions = yes
</span><span class='line'>unix password sync = yes
</span><span class='line'>passwd program = /usr/bin/passwd %u
</span><span class='line'>passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
</span><span class='line'>map to guest = bad user
</span><span class='line'>usershare allow guests = no
</span><span class='line'>
</span><span class='line'>[w]
</span><span class='line'>comment = a shared directory
</span><span class='line'>path = /path/to/shared
</span><span class='line'>guest ok = no
</span><span class='line'>write list=username
</span><span class='line'>create mask = 0600</span></code></pre></td></tr></table></div></figure>


<h2><a href="http://synergy2.sf.net">Synergy2</a>，一套键盘鼠标控制两(多)台计算机</h2>

<p>一般使用 linux 作为主机，其配置也是相当的简单</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>section: screens
</span><span class='line'> linux-name:
</span><span class='line'> windows-name:
</span><span class='line'>end
</span><span class='line'>section: links
</span><span class='line'> windows-name:
</span><span class='line'> right = linux-name
</span><span class='line'> linux-name:
</span><span class='line'> left = windows-name
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>windows 下的 Synergy2 有设置界面。apt-get 安装的版本可能稍微旧了一些。</p>

<h2>GYP，编译系统</h2>

<p>同时支持 Makefile 和 Visual Studio 的 .vcproj 工程文件，出自 Google 的 Chrome http://code.google.com/p/gyp/</p>

<p>其中 gyp 内容一般为：<br /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{
</span><span class='line'> 'targets': [
</span><span class='line'> {
</span><span class='line'>  'target_name': 'foo',
</span><span class='line'>  'type': 'executable'
</span><span class='line'>  'dependencies': [
</span><span class='line'>   'xyzzy',
</span><span class='line'>   '../bar/bar.gyp:bar',
</span><span class='line'>  ],
</span><span class='line'>  'defines': [
</span><span class='line'>   'DEFINE_FOO',
</span><span class='line'>   'DEFINE_A_VALUE=value',
</span><span class='line'>  ],
</span><span class='line'>  'include_dirs': [
</span><span class='line'>   '..',
</span><span class='line'>  ],
</span><span class='line'>  'sources': [
</span><span class='line'>   'file1.cc',
</span><span class='line'>   'file2.cc',
</span><span class='line'>  ],
</span><span class='line'> },
</span><span class='line'> ],
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p><span style="color: #6aa84f;">gyp -fmake foo.gyp</span> 能产生 Makefile<br />
<span style="color: #6aa84f;">gyp -fmsvs foo.gyp</span> 产生 foo.vcproj 以及 foo.sln</p>

<p>其编译速度通常比 cmake, scons 快很多。管理大型工程是非常的合适。<br />
其实还能生成 Mac 下的 xcode 项目文件，可惜我没有 Mac 系统。</p>

<p>使用 Visual Studio 写代码比 vi 能快不少。<br />
<img border="0" height="250" src="/pic/vs.png" width="320" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/14/programmers-three-laws/">程序员三大法则</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-14T17:50:39+08:00" pubdate data-updated="true">Jan 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>    <a href="http://lifesinger.org/blog/2011/01/three-laws-of-programmers/" target="_blank">程序员三大法则</a></h2>


<p>    <span>from <a href="https://www.google.com/reader/view/feed/http%3A%2F%2Flifesinger.org%2Fblog%2F%3Ffeed%3Drss2" target="_blank">岁月如歌</a></span> <span>by <span>lifesinger</span></span></p>


<h3>第一法则</h3>


<p>程序员不得损害产品质量，或袖手旁观产品质量受到损害。</p>


<h3>第二法则</h3>


<p>程序员必须服从产品经理的命令，除非违背第一法则。</p>


<h3>第三法则</h3>


<p>程序员必须保护自己，除非违背第一和第二法则。</p>


<p>据说还有一条繁殖定律：</p>


<h4>繁殖定律</h4>


<h4>程序员不得参与程序员的孕育和培养，除非新程序员的行动符合以上三大法则。</h4>


<p>参考资料：<a href="http://en.wikipedia.org/wiki/Three_Laws_of_Robotics" target="_blank">Three Laws of Robotics</a></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/07/use-ocr-identify-verification-code/">使用 OCR 识别验证码</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-07T10:18:00+08:00" pubdate data-updated="true">Jan 7<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>tesseract-ocr 是一个历史悠久的 OCR 引擎，代码位于 http://code.google.com/p/tesseract-ocr/。现在由 Google 开发。几年间代码有了很多 Google 的风格，也相对成熟稳定了一些。对于简单英文字符有很高的识别率。<br /></p>

<br />


<p>在代码顶层目录执行 <br />
TESSDATA_PREFIX=./ api/tesseract 1.jpg 1 -l eng<br />
解释一下：<br />
TESSDATA_PREFIX 是环境变量，该目录下有 tessdata/<br />
下面应该有 configs/ eng.traineddata 等<br />
tesseract 是 OCR 识别程序<br />
1.jpg 是需要识别的图像文件<br />
1 会生成 1.txt 的识别结果<br />
-l eng 是指应用训练库 eng.traineddata 进行识别<br /></p>

<br />


<p>一般难度的验证码，如 <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_CZ0niZQI8-o/TSZzHnQ_g1I/AAAAAAAAF4g/YDOVxfryATQ/s1600/6.jpg" style="clear: left; float: left; margin-right: 1em; margin-bottom: 1em;"><img border="0" height="45" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TSZzHnQ_g1I/AAAAAAAAF4g/YDOVxfryATQ/s320/6.jpg" width="120" /></a></div>都可以达到 20% 左右的的正确率。<br /></p>

<br />


<p>tesseract-ocr 没有关于layout analysis，如果先对图像预处理，会有更高的效果。<br /></p>

<br />


<p>如果针对图像训练会有意想不到的效果。但是其wiki里的文档没有说太明白<br />
过程如下：<br />
1) 先生成box文件，可能有错误<br />
api/tesseract 1.jpg 1 makebox<br />
api/tesseract 1.jpg 2 makebox<br /></p>

<br />


<p>2) 使用 python 的编辑器，调整 box 文件内矩形数据的正确性<br />
python tesseractTrainer.py<br /></p>

<br />


<p>3) 开始训练。<br />
api/tesseract 1.jpg {output} box.train<br />
api/tesseract 2.jpg {output} box.train<br />
&#8230;<br /></p>

<br />


<p>4) 对训练结果进行转换<br />
training/mftraining <em>.tr<br />
training/cntraining </em>.tr<br />
training/unicharset_extractor *.box<br /></p>

<br />


<p>cp unicharset tessdata/rr.unicharset<br />
cp pffmtable tessdata/rr.pffmtable<br />
cp inttemp tessdata/rr.inttemp<br />
cp normproto tessdata/rr.normproto<br /></p>

<br />


<p>5) 合并成 rr.traineddata<br />
cd tessdata<br />
../training/combine_tessdata rr.<br /></p>

<br />


<p>之后就可以使用-l rr来识别了</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/29/google-employees-read-me-teaching-at-harvard-and-works-in-google-difference/">Google员工自述：在哈佛教书和在Google工作的差别</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-29T22:47:09+08:00" pubdate data-updated="true">Dec 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>    <a href="http://dongxi.net/b03SL" target="_blank">Google员工自述：在哈佛教书和在Google工作的差别</a></h2>


<p>    <span>from <a href="https://www.google.com/reader/view/feed/http%3A%2F%2Fwww.dongxi.net%2Ffeed" target="_blank">东西</a></span> <span>by <span>伯乐在线</span></span>    <p>        <p>            <span>3 people liked this</span>        </p>
    </p>
</p>


<p>编者按：2003年到2010年期间，原文作者Matt Welsh  是哈佛大学工程和应用科学学院的计算机科学系教授。2010年加入Google，是一名高级工程师。他当前的工作重点是广域网性能和健壮性。下文由 Matt所写，文章对比了Matt在Google和哈佛大学时的一天作息，译文由伯乐在线编译。<br />
     <br />
 最近我在想，和在哈佛时的院系工作相比，在Google上班日子到底有多么不同。最大的差别就是，相比之下，我曾在哈佛比较幸运，一周花半个小时做编 程相关的事。而在Google，我花费将近（或超过）90%的时间在编写代码。另外，我拖延所耗费的时间和浏览大量&ldquo;无意义&rdquo;网站的时间更少了，这大致是 因为我更享受工作带来的乐趣。<br />
     <br />
     <strong>下面就是我在Google典型一天的过程：</strong>    <br />
     <br />
 6：30 - 起床、把儿子叫起床、洗漱、早餐、带狗遛公园。<br />
     <br />
 8：30 - 去上班（大多数时间是乘地铁）。<br />
     <br />
 9：00 - 到公司。输入6个不同的窗口密码，让我的工作场所返回正常状态。检查邮件。检查我在不同数据中心的几个部署任务的状态，然后接着昨天的工作。<br />
     <br />
 9：30 - 10：15 - 开始编码，给我所在的系统增加请求的功能。一直调试，直至正常运作，编写一到两个单元测试。处理代码变动列表。去拿当日的三瓶免费的无糖可乐。<br />
     <br />
 10：15 - 11：00 - 转到另外一个项目Git分支。查看同事给我所写代码的Review评论。仔细检查代码，并着手处理评论中所提问题。构建新版本，重新测试，重新修改代码，以确保代码看起来和运作都不错。提交修改后的变动列表，回应评论。<br />
     <br />
 11：00 - 11：30 - 再次切换Git分支。安全起见，重构代码，然后启动一个需运行三小时的MapReduce任务，生成日志数据，来分析网络延迟。<br />
     <br />
 11：30 - 12：00 - 和在山景城的团队成员开快速的视频会议。<br />
     <br />
 12：00 - 12：35 - 在餐厅品尝免费的美味午餐。和同事一起逗乐，分享我在中学时破解 Apple IIgs的故事。<br />
     <br />
 12：35 - 14：00 - 返回办公桌。检查邮件。检查MapReduce的工作状态 - 基本完成一大半。回应上午已完成的代码Review的最新评论，然后提交代码。合并并清理Git分支。查看任务列表，决定接下来做什么事。<br />
     <br />
 14：00 - 15：00  -和在剑桥、山景城和其他地方的团队开视频项目会议。这个会议是我一周之内唯一时长一小时的会议。这段时间比较有趣，我用来对笔记本做些小检查，点击&ldquo;重 载&rdquo;MapReduce的状态页面，查看是否已经完成。检查Buzz，并匿名发布一到两条评论。<br />
     <br />
 15：00 - 16：00  -灌点红牛，保持能量，继续奋战剩余时间。MapReduce已经完成。生成（MapReduce的）结果数据图，并仔细凝视观察一会。分析结果为什么和 预期结果不一样，并编写新版本代码，来生成另外一套统计数据。在结束当日工作之前，尽可能把代码整理到可以启动另一个MapReduce。<br />
     <br />
 16：00 - 17：00 - Whiskey Thursday！一群同事聚集到一块，喝苏格兰威士忌并弹吉他。（我办公桌下面收集一些苏格兰威士忌。不知怎么的，我被指派为&ldquo;酒会&rdquo;的护卫，不过这挺适合我的。）<br />
     <br />
 17：00 - 收拾笔记本，回家。<br />
     <br />
 17：30 - 20：00 - 晚餐，家庭时间直至儿子去睡觉。<br />
     <br />
 20：00直至睡觉 - 如果晚上有事做，就做事。如果没事，就喝些鸡尾酒。<br />
     <br />
     <br />
     <strong>相比之下，我在哈佛典型的一天工作：</strong>    <br />
     <br />
 6：30 - 起床、把儿子叫起床、洗漱、早餐、带狗遛公园。<br />
     <br />
 8：30 - 去上班（从家走到办公室是20分钟路程，我会带着狗一起去）。<br />
     <br />
 9：00 - 到办公室。检查邮件。抱怨下午会议之前我必须要做的大量工作。<br />
     <br />
 9：15 - 开始写资助申请书。大约三分钟后，我不知道我要写些什么东西，所以接下来的约45分钟时间是在看Engadget、Hacker News和Facebook。<br />
     <br />
 10：00 - 尽力迅速从看网站的昏迷状态中恢复过来，尽力在一堆必须写的推荐信中有所进展。幸运的是，这些工作容易，可以借鉴我以前写给其他人的推荐信，大部分是&ldquo;拷贝粘贴&rdquo;的工作。<br />
     <br />
 11：00 - 查看日历，发现我仅剩一个小时来完成实质性的工作。回复一些在我收件箱呆了几周的邮件。给助手发邮件，安排下周的三次以上的会议。<br />
     <br />
 11：30 - 起草一份预算，给不同的支持人员发送三封邮件，尽力在资助申请书方面有所进展。给申请书取一个标题和全额预算，使其听起来合理。不过仍然还不知道项目内容会是什么样的。<br />
     <br />
 12：00 - 带着狗狗，在校园溜达20分钟。如果遇到其他狗狗，花的时间会更多些。<br />
     <br />
 12：30 - 跑到法学院餐厅，打超贵又不怎么好吃的午饭。回到办公室一个人郁郁寡欢地吃，边吃边看Engadget和Hacker News。<br />
     <br />
 13：00 - 当日的第一个会议，和随机来自台湾公司的随机人员开会。他们并没有给我任何费用，但却想让我花费半个小时时间，来超详细地解释我给他们做的研究项目。<br />
     <br />
 13：30  -当日的第二个会议，和一位二年级的学生开。他突然决定，在漫无目的的四年大学生活后，他想去伯克利或麻省理工攻读哲学博士。虽然我解释说，没有相关研究 记录，不大可能有机会了，但他最后请求我无论如何要写一封推荐信。（于是）狡黠地留意可以借鉴哪些推荐信。<br />
     <br />
 14：00 - 想到不得不做半个小时的讲课。（于是）找出去年的讲课笔记，把幻灯片标题中的&ldquo;2009&rdquo;改成&ldquo;2010&rdquo;。大概浏览一下，虽然想起来这个讲课完全是个灾难，但我并没有时间来修正了。<br />
     <br />
 14：30 - 16：00  -向大约70名又困又烦的本科生讲了缓存算法。为了让讲课更加令人兴奋，我用了大量的PPT动画，也用激光笔狂热地做手势。在回答大量问题后，让我想起 来，这个幻灯片去年为什么是灾难了，发誓一定要在来年再次使用这个幻灯片之前要修改它。<br />
     <br />
 16：00 - 16：10 - 关门躲在办公室，尽力平静心情，平复在讲课过程中飙升的肾上/腺。狂灌可乐来补充能力和水分。<br />
     <br />
 16：10 - 16：20 - 查看邮件；浏览Engadget；查看Facebook。<br />
     <br />
 16：30 - 17：00  -当日的最后一次会议，和两位研究生讨论所剩时间不到一周就要提交的论文。尽管他们没有大纲和结果，但他们非常乐观，相信能及时完成。我在白板上花约半个 小时概述思想和可能的图表，他们则在笔记本上龙飞凤舞地记录。许下一个模糊的承诺，如果本周我可以看到草稿，我可以检查。<br />
     <br />
 17：00 - 带着狗狗走路回家。这是一天中最爽的时候。<br />
     <br />
 17：30 - 回到家，立刻坐下来查看我在演讲和会议中积累的大量邮件。给我助手发送五个新的会议请求，让他在下周安排好。<br />
     <br />
 17：45 - 20：00 - 家庭时间，晚餐。<br />
     <br />
 20：00 - 通过查看邮件和修改我下周要用到的幻灯片，来假装&ldquo;工作&rdquo;。由于太累，啥正事也干不了了，喝点酒，然后再次浏览Engadget网站。<br />
     <br />
     <br />
     <strong>编者后话</strong>    <br />
     <br />
 也许你看过此文后，会觉得哈佛教授的一天工作时间怎么有点懒散，其实原文评论中也有类似疑问，Matt在回复中解释说，这是他个人不善于时间管理，并非所有哈佛同事都和他一样。</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/20/tencent-auditorium-internal-information-continued-3/">腾讯大讲堂内部资料 - 续3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-20T23:18:37+08:00" pubdate data-updated="true">Oct 20<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>分享事故，总结经验</p>


<p>第一个引进游戏《凯旋》<br />
    <img src="http://fmn.rrimg.com/fmn055/20101020/1500/b_large_oB8w_7c150010a0915c41.jpg" alt=""><br />
    <br />
    <img src="http://fmn.rrimg.com/fmn048/20101020/1500/b_large_x5Un_24fb000b68df5c43.jpg" alt=""><br />
    <img src="http://fmn.rrimg.com/fmn051/20101020/1500/b_large_mvik_782a00133f825c44.jpg" alt=""><br />
腾讯然后调整了游戏运营的工作模型<br />
    <br />
    <strong>接着是腾讯</strong><strong>自己开发</strong><strong>的《</strong><strong>QQ堂</strong><strong>》</strong>    <br />
    <img src="http://fmn.rrimg.com/fmn054/20101020/1500/b_large_4h3k_1d2b00054a4f5c41.jpg" alt=""></p>


<p>《QQ幻想》<br />
    <img src="http://fmn.rrimg.com/fmn047/20101020/1505/b_large_9Q7D_1d3d0007ea2c5c42.jpg" alt=""></p>


<p>    <img src="http://fmn.rrimg.com/fmn055/20101020/1505/b_large_OZjb_085e000958dd5c40.jpg" alt=""><br />
最后玩家强烈要求回档，不得已调动一切力量回档</p>


<p>    <img src="http://fmn.rrimg.com/fmn051/20101020/1505/b_large_xjf1_7822000efeb05c44.jpg" alt=""></p>


<p>后面本来还有一个技术故障导致的事故，但是意义不大了。腾讯几年前就能做到能分享事故，然而号称还在创业期的公司都做不到。</p>


<p>腾讯今年初的一个讲座里显示游戏运营俨然已经是一个大规模的利润制造平台了。<br />
    <br />
我都在考虑迁居到南方了。</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/tencent-auditorium-internal-information-continued-2/">腾讯大讲堂内部资料 - 续2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T23:51:15+08:00" pubdate data-updated="true">Oct 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>机器数量<br />
    <br />
    <img src="http://fmn.rrimg.com/fmn054/20101015/1545/b_large_2cNc_086c001716865c40.jpg" alt=""><br />
    <br />
    <br />
    <img src="http://fmn.rrimg.com/fmn053/20101015/1545/b_large_kbwW_782a00117e025c44.jpg" alt=""><br />
    <br />
带宽数据<br />
    <br />
    <img src="http://fmn.rrimg.com/fmn050/20101015/1545/b_large_itrw_7c9d00105ac45c3f.jpg" alt=""><br />
    <br />
其他，腾讯有业务间调用接口监控，统一日志。<br />
估计现在其规模已经超过Facebook</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/30/os-x-font-trouble/">OS X Font Trouble</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/11/nexus-flash/">Nexus Update 4.0.4(IMM761)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/02/collaboration-in-corp/">公司内部代码协作</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/28/high-power-smartphone/">high power smartphone</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/22/mawk-and-gawk/">mawk and gawk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/31/trivial-detail-in-facebook-messenger/">trivial detail in facebook messenger</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/23/csdn-password-leak-under/">密码泄漏事件下的冰山</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("boostguy", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/boostguy" class="twitter-follow-button" data-show-count="false">Follow @boostguy</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Ken -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'heartoutside';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
