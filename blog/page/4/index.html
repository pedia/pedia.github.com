
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>HeartOutside</title>
  <meta name="author" content="Ken">

  
  <meta name="description" content="别好奇，怪怪的，好奇害死猫。 一位名为David Barksdale的Google工程师因为违反公司内部规定，私自访问用户数据而被除名，其中包括四名未成年用户的数据。这一消息已经得到Google 证实。Google表示公司&ldquo;正在投入更多时间用来审计公司访问日志， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://log.heartoutside.com/blog/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="HeartOutside" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">HeartOutside</a></h1>
  
    <h2>not yet</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="domains" value="log.heartoutside.com" />
    <input type="hidden" name="sitesearch" value="log.heartoutside.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/16/a-google-engineer-who-accessed-user-data-being-fired/">又一名Google工程师因访问用户数据被开除</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-16T19:33:02+08:00" pubdate data-updated="true">Sep 16<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>    <img src="http://tctechcrunch.files.wordpress.com/2010/09/googlelogo.png" alt=""></p>


<p>    <span style="font-size: 14.0px;">别好奇，怪怪的，好奇害死猫。</span></p>


<p>    <span style="font-size: 14.0px;">一位名为David  Barksdale的Google工程师因为违反公司内部规定，私自访问用户数据而被除名，其中包括四名未成年用户的数据。这一消息已经得到Google 证实。Google表示公司&ldquo;正在投入更多时间用来审计公司访问日志，以确保公司控制措施的有效性。&rdquo;</span></p>


<p>    <span style="font-size: 14.0px;">这是Google第几次出现这种事件呢，Google答曰：2。  但第一次不涉及未成年人，那位下场和Barksdale一样。</span></p>


<p>    <span style="font-size: 14.0px;">来自Rumpus的一篇文章称Facebook也有两名员工因为访问用户数据被公 司开除。但Facebook拒绝直接回答是否发生过这类事件，以及发生次数</span></p>


<p>&nbsp;</p>


<p>    <span style="font-size: 14.0px;">转自 http://dongxi.net/b02nz<br />
源于 http://feeds.wordpress.com/1.0/gocomments/tctechcrunch.wordpress.com/219300/</span></p>


<p>    <span style="font-size: 14.0px;">        <br />
    </span></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/15/choose-a-distributed-file-system/">Choose a Distributed File System</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-15T14:42:00+08:00" pubdate data-updated="true">Jul 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is how I choose a DFS:<br /></p>

<br />


<p>1 Fault Tolerance<br />
2 No SPOF<br />
3 Data Node add/remove easy<br />
4 <span id="goog_1765811814"></span><span id="goog_1765811815"></span>Application develop easy<br />
5 POSIX semantics <span></span>file system interface<br />
6 Monitor and tools &#8230;<br /></p>

<br />


<p>There is a full list In <a href="http://en.wikipedia.org/wiki/List_of_file_systems#Distributed_fault-tolerant_file_systems">wikipedia</a>.<br />
For situation 1, Disk, file, machine, network failure should be consider.<br />
No SPOF and HA is most important for a&nbsp; robust system.<br /></p>

<br />


<p>At last I choose <a href="http://en.wikipedia.org/wiki/Moose_File_System">Moose File System</a>, it&#8217;s much like <a href="http://labs.google.com/papers/gfs.html">GFS</a> and it is great. Thanks to them.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/29/latest-public-facebook-information/">Facebook最新公开信息</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-29T19:32:06+08:00" pubdate data-updated="true">Jun 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今年Velocity上的<a href="http://www.youtube.com/watch?v=T-Xr_PJdNmQ&feature=player_embedded#%21" target="_blank">视频</a>，部分信息的截屏.</p>


<p>A Day in the Life of Facebook Operations</p>


<p>    <strong>Facebook有多大？</strong>     <br />
     <img src="http://fmn.xnimg.cn/fmn038/20100629/1115/b_large_SucK_7406000142de2d14.jpg" alt=""></p>


<p>    <br />
     <img src="http://fmn.xnimg.cn/fmn036/20100629/1120/b_large_QsDV_74060001430a2d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn044/20100629/1120/b_large_acdX_7406000143142d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn038/20100629/1120/b_large_2cXE_7408000206ed2d14.jpg" alt=""><br />
     <br />
Growth<br />
     <img src="http://fmn.xnimg.cn/fmn043/20100629/1120/b_large_D8KY_7408000207022d14.jpg" alt=""></p>


<p>服务器数量，去年公布的3万台，估计今年应该到了6万。<br />
     <img src="http://fmn.xnimg.cn/fmn038/20100629/1120/b_large_z2oG_74060001434e2d14.jpg" alt=""></p>


<p>正在俄勒冈建立第3个数据中心 http://facebook.com/prinevilledatacenter</p>


<p>    <img src="http://fmn.xnimg.cn/fmn041/20100629/1120/b_large_j6vq_740a00030d622d14.jpg" alt=""><br />
     <br />
架构<br />
     <img src="http://fmn.xnimg.cn/fmn041/20100629/1120/b_large_9Ws4_740a00030db72d14.jpg" alt=""></p>


<p>    <br />
     <img src="http://fmn.xnimg.cn/fmn036/20100629/1120/b_large_JVQ9_74080002082a2d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn040/20100629/1120/b_large_muIa_74080002083b2d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn043/20100629/1120/b_large_6xhI_740a00030e2b2d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn044/20100629/1120/b_large_5VCR_740a00030e462d14.jpg" alt=""><br />
     <br />
Configure Managment 在fb有举足轻重的地位，使用 CFengine 3 管理集群<br />
     <img src="http://fmn.xnimg.cn/fmn038/20100629/1120/b_large_nwRq_7408000208ab2d14.jpg" alt=""><br />
     <br />
     <strong>Deployment</strong>     <br />
we focus on web push first.<br />
     <img src="http://fmn.xnimg.cn/fmn040/20100629/1120/b_large_YvSK_7408000208d12d14.jpg" alt=""><br />
这可能是最有意思的细节了<br />
Use BitTorrent to deploy source code, It&#8217;s very fast.</p>


<p>    <strong>开发</strong>     <br />
一般开发模式可能是 Engineering/QA/Operations，但是我们没有QA，因为沟通成本太高<br />
我们的Engineers write,and deploy their own code, 能够快速关注性能问题，流量等<br />
运营人员&lsquo;embedded&rsquo; int oengineering teams，来更好的做好架构决策，更好的理解产品<br />
     <img src="http://fmn.xnimg.cn/fmn042/20100629/1125/b_large_4ylZ_740000002be82d14.jpg" alt=""><br />
     <br />
     <strong>Change logging</strong>     <br />
所做的操作都记录在案，大部分更新时间都在凌晨1点<br />
     <img src="http://fmn.xnimg.cn/fmn042/20100629/1125/b_large_4BYL_7406000144bc2d14.jpg" alt=""></p>


<p>    <strong>Monitor and Metrics</strong>     <br />
     <img src="http://fmn.xnimg.cn/fmn040/20100629/1125/b_large_EN7v_740a00030fcd2d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn045/20100629/1125/b_large_fnFB_740a00030feb2d14.jpg" alt=""><br />
     <br />
Ganglia is very Fast.<br />
     <img src="http://fmn.xnimg.cn/fmn043/20100629/1125/b_large_V4MZ_740a000310092d14.jpg" alt=""><br />
     <br />
another graph tool ODS <br />
     <img src="http://fmn.xnimg.cn/fmn040/20100629/1125/b_large_sDRe_7406000145182d14.jpg" alt=""><br />
     <br />
     <img src="http://fmn.xnimg.cn/fmn045/20100629/1125/b_large_mAUt_740a000310732d14.jpg" alt=""><br />
     <br />
basically use Nagios.<br />
     <br />
     <strong>Aggregation</strong>     <br />
     <img src="http://fmn.xnimg.cn/fmn045/20100629/1125/b_large_oVLk_740200005c2c2d14.jpg" alt=""><br />
     <br />
     <strong>How we do it</strong>     <br />
Constant Growth<br />
Constant Failure<br />
Logical Units<br />
servers, racks, clusters, datacenters<br />
Constant Communication<br />
     <img src="http://fmn.xnimg.cn/fmn043/20100629/1125/b_large_ZFCK_740a000310fa2d14.jpg" alt=""><br />
这个也很有意思，每个员工都在使用IRC<br />
     <br />
     <strong>Small Teams</strong>     <br />
这是fb最引以为豪的事情<br />
     <img src="http://fmn.xnimg.cn/fmn038/20100629/1125/b_large_2rRN_7406000145862d14.jpg" alt=""></p>


<p>Recap<br />
     <img src="http://fmn.xnimg.cn/fmn041/20100629/1125/b_large_i1UM_740a000311842d14.jpg" alt=""></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/29/a-day-in-the-life-of-facebook-operations/">A Day in the Life of Facebook Operations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-29T11:14:00+08:00" pubdate data-updated="true">Jun 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>How big Facebook is?</h2>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClZ1kgIbBI/AAAAAAAAFWs/IjkL-G9uAF8/s320/fb_1.png" /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClZ4ntQCYI/AAAAAAAAFW0/QlyO87wEsN4/s320/fb_2.png" /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClZ5yksdII/AAAAAAAAFW8/jkR4A1lyiWI/s320/fb_3.png" /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClZ9ev6egI/AAAAAAAAFXE/CLzrJntOp78/s320/fb_4.png" /></p>

<p>and servers, 60K?</p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClgijuptCI/AAAAAAAAFYE/NiiQcWNYOFk/s320/fb_6_server.png" /></p>

<h2>Rapid Growth</h2>

<p><img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClZ-e2wyMI/AAAAAAAAFXM/okv4H7W76hc/s320/fb_5_growth.png" /><br /></p>

<br />


<p>正在俄勒冈建立第3个数据中心<br />
<img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClc1HhX4sI/AAAAAAAAFXU/h_oapa2Vhgs/s320/fb_7_DC.png" /></p>

<h2>architect</h2>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClc6OOnkyI/AAAAAAAAFXk/hCkCJ5voqFM/s320/fb_arch.png" /><br /></p>

<br />


<p>Hiphop for PHP<br /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClc5G1-dZI/AAAAAAAAFXc/G9FOgaK-xhs/s320/fb_7_php.png" />memcached 300+TB live data in RAM<br />
<img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TClhFwKDqiI/AAAAAAAAFYM/O3U3lWEkvH8/s320/fb_9_memcached.png" />
<img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClhG_ySqCI/AAAAAAAAFYU/OZpWZkhxUDY/s320/fb_10_services.png" />All services are independent.<br /></p>

<p><img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClc7h6bXII/AAAAAAAAFXs/li-GVSNKLKg/s320/fb_arch2.png" /></p>

<h2>Configure Managment</h2>

<p>use CFengine 3<br />
<img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClc-5zkzjI/AAAAAAAAFX0/YVEFJjhzHuc/s320/fb_cfengine.png" /><br />
Deployment</p>

<p>we focus on web push.<br />
Use BitTorrent to deploy source code, It&#8217;s very fast. <br /></p>

<p><img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TCldGKDdrmI/AAAAAAAAFX8/wnZ86Su-m_g/s320/fb_webpush.png" /><br /></p>

<br />


<br />


<br />


<p>一般开发模式可能是 Engineering/QA/Operations，但是我们没有QA，因为沟通成本太高<br />
我们的Engineers write,and deploy their own code, 能够快速关注性能问题，流量等<br />
运营人员‘embedded’ int oengineering teams，来更好的做好架构决策，更好的理解产品<br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCliNPdHmKI/AAAAAAAAFYc/3AL0JQhaVC8/s320/fb_14_engineering.png" /><br /></p>

<br />


<p>Change logging<br />
所做的操作都记录在案，大部分更新时间都在凌晨1点<br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCliT9U0O9I/AAAAAAAAFYk/ZuHLLt1i4Vs/s320/fb_15_change_logging.png" /><br /></p>

<h2>Monitor and Metrics</h2>

<p>Ganglia is very Fast.<br />
<img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TClig79cXfI/AAAAAAAAFYs/aqbI5QkF19Q/s320/fb_16_monitor.png" />
<img border="0" src="http://1.bp.blogspot.com/_CZ0niZQI8-o/TClijJ3VlGI/AAAAAAAAFY0/5bnB2jPKn4A/s320/fb_17_monitor2.png" /><br />
another graph tool ODS <br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCli2cVKxqI/AAAAAAAAFZE/Xdr4OLpD_AI/s320/fb_19_ods2.png" /><br /></p>

<p><img border="0" src="http://3.bp.blogspot.com/_CZ0niZQI8-o/TCliltk5tNI/AAAAAAAAFY8/sdOJjgKLg8Q/s320/fb_18_ganglia.png" /><br />
We basically use Nagios.<br /></p>

<h2>Aggregation</h2>

<p><img border="0" src="http://4.bp.blogspot.com/_CZ0niZQI8-o/TCli_LG0kDI/AAAAAAAAFZM/HSfWEp8m_PU/s320/fb_20_alarm.png" /><br /></p>

<br />


<h2>How we do it</h2>

<p>Constant Growth<br />
Constant Failure<br />
Logical Units<br />
servers, racks, clusters, datacenters<br />
Constant Communication<br />
Everyone use IRC<br /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TCljJ21jt4I/AAAAAAAAFZU/wj7EoG2iIOE/s320/fb_21_communiction.png" /><br /></p>

<h2>Small Teams</h2>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TCljTPe2YwI/AAAAAAAAFZc/e61xS_fRftI/s320/fb_22_users.png" /><br /></p>

<br />


<p>Recap<br /></p>

<p><img border="0" src="http://2.bp.blogspot.com/_CZ0niZQI8-o/TCljZRhB8mI/AAAAAAAAFZk/vGW1HOEeN94/s320/fb_23_recap.png" /><br />
screenshot from <a href="http://www.youtube.com/watch?v=T-Xr_PJdNmQ&amp;amp;feature=player_embedded#%21">youtube.</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/12/distributed-file-system-glusterfs/">分布式文件系统 GlusterFS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-12T10:04:00+08:00" pubdate data-updated="true">Jun 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>文档</h2>

<p>http://gluster.com/community/documentation/index.php/Gluster_Storage_Platform<br />
http://gluster.com/community/documentation/index.php/GlusterFS_cookbook<br />
最好的文档应该是git中的 user-guide.pdf<br /></p>

<h2>代码</h2>

<p>git clone git://git.gluster.com/glusterfs.git<br />
貌似在gnu还有一份拷贝，但是似乎两个版本有细微差距<br />
GlusterFS 能使用 libibverbs，下载地址在 http://www.openfabrics.org/downloads/verbs/ <br /></p>

<p>对应于 configure 的结果中的  Infiniband verbs<br /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>FUSE client        : yes
</span><span class='line'>Infiniband verbs   : no
</span><span class='line'>epoll IO multiplex : yes
</span><span class='line'>argp-standalone    : no
</span><span class='line'>fusermount         : no</span></code></pre></td></tr></table></div></figure>


<h2>优点</h2>

<p>1 结构清晰<br />
* libglusterfs<br />
* glusterfsd<br />
* booter<br />
* glusterfs<br />
* mod_gluster for apache/lighttpd 甚至支持 DAV<br /></p>

<p>各司其职，每个模块功能都做到极致</p>

<p>2 支持多种 signal 控制<br />
 object dump<br />
 latency 评测<br />
 崩溃后会输出 backtrace(有可能不准确)<br />
 log rotate<br />
功能不是很突出，但是这种编程、思维模式很好。<br /></p>

<p>3 其 Translators 概念非常不错<br />
   号称实现了所有 filesystem operations, 内部有一个比VFS更精细的树状结构:<br />
   cluster/afr 貌似支持 raid1<br />
   type cluster/unify<br />
   type cluster/stripe<br />
   type cluster/dht<br /></p>

<p>都是很有价值的功能<br /></p>

<p>这是我最喜欢的分布式文件系统实现，缺点是卷的配置是固定的，动态添加节点应该是不可能的(至少得改变父节点的配置文件)。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/11/distributed-file-system-ceph/">分布式文件系统 Ceph</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-11T09:46:00+08:00" pubdate data-updated="true">Jun 11<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ceph 的<a href="http://ceph.newdream.net/about/">优点</a>写 得很突出
* Striping
* dynamic Meta Server
* object  storage ?</p>

<p>07 年就开始发布paper了，<a href="http://www.newdream.net/%7Esage/">作者</a>貌似只有一人，06 年的Phd毕业生。<br />
系统好像依赖 btrfs, 有人说 btrfs 没有达到 product  级别，Ceph 作者也<a href="http://ceph.newdream.net/2010/05/linux-v2-6-34-is-out/">坦承</a>：</p>

<blockquote><p>Please note, however, that Ceph is still  <strong>experimental</strong> and is not yet ready for use in a production environment.</p></blockquote>

<p>因为Ceph依赖文件系统，搭建测试会比较费劲<br />
我在初步阅读了服务器端的代码，C++实现, 代码量很大，感觉写得很丑陋，直觉就是不想测试这个分布式系统了。</p>

<p>我没有阅读已经进入 Kernel 的Ceph Client 的代码。</p>

<p>doc<br />
<a href="http://www.ibm.com/developerworks/linux/library/l-ceph/index.html" target="_blank">http://www.ibm.com/developerworks/linux/library/l-ceph/index.html</a><br />
<a href="http://ceph.newdream.net/about/" target="_blank">http://ceph.newdream.net/about/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/10/system-monitoring-munin/">系统监控 Munin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-10T09:44:00+08:00" pubdate data-updated="true">Jun 10<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在系统监控方面，有很多选择，如 ganglia, nagios, cacti, monit等等，各有所长。<br />
ganglia 在集群监控上优势很大，对系统管理员非常有价值，但是对于服务开发者－程序员来说远远不够，监控项目太少了，二次开发，定制比较困难。</p>

<p>munin 对内存的监控项目如下<br /></p>

<p><img border="0" height="335" src="/pic/munin-memory-day.png" width="400" /><br /></p>

<p>应该是非常详尽了的。<br /></p>

<h2>munin 的特点</h2>

<ul><li>扩展<br />
munin 的 <a href="http://munin-monitoring.org/wiki/HowToWritePlugins">plugin</a> 编写比 ganglia 简单很多<br />
ganglia 需要实现约定接口，最麻烦的是需要配置文件对输出结果进行自定义。统计項复杂时，几乎不可接受。<br />
并且一个Plugin只能汇报一个值(统计项)，如果要在 rrdtool 中汇聚了多个值，出图又成问题。<br />
munin 的扩展编写只需要脚本即可，如下：<br />
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo a.value 100</span></code></pre></td></tr></table></div></figure>
并且一个独立的脚本就可以控制：出图，出值，配置信息<br />

其<a href="http://munin-monitoring.org/wiki/Debugging_Munin_plugins">调试</a>过程也很容易,运行 munin-run load, munin-run load config 就能看到脚本是否正确<br />
远程使用 telnet host 4949 也能进行测试<br />

对于程序员，可以把程序内部的计数器，如函数调用次数，内部状态等汇报至监控系统。<br />
</li>

<li>性能<br />
ganglia 本身轻量级很多，应该是主机向集群节点主动推送的机制 ?<br />
munin 是中心节点定时去主机那里获取信息<br />
munin-node 的执行开销比 gmond 的执行开销要大。可以通过禁用掉不太有价值的 plugin 来降低 load<br />
</li>

<li>系统容量<br />
munin 能监控的主机数目完全受中心节点系统资源限制，如果 5 分钟内没有办法遍历一次所有主机就成问题了，munin 支持并发更新<br />
其 Web 支持静态文件和 <a href="http://munin-monitoring.org/wiki/CgiHowto">CGI 方式</a><br />
静态方式每次都要产生 png 和 html</li>

<li>还有，munin 能使用 nagios 报警</li>
</ul>


<p>安装方式</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum -y install munin
</span><span class='line'>yum -y install munin-node</span></code></pre></td></tr></table></div></figure>


<p>如果失败，可以尝试配置 dag 的 yum repos<br /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[dag]
</span><span class='line'>name=Dag RPM Repository for Red Hat Enterprise Linux
</span><span class='line'>baseurl=http://apt.sw.be/redhat/el5/en/$basearch/dag
</span><span class='line'>gpgcheck=1
</span><span class='line'>gpgkey=http://dag.wieers.com/rpm/packages/RPM-GPG-KEY.dag.txt
</span><span class='line'>enabled=1</span></code></pre></td></tr></table></div></figure>


<p>其他系统安装见<a href="http://munin-monitoring.org/wiki/LinuxInstallation">这儿</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/09/ip-query/">Ip库查询</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-09T09:51:00+08:00" pubdate data-updated="true">Jun 9<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>现在网上流传的ip库，稍微处理了一下，一共 373691条记录，压缩后是 3.5M<br />
记录格式如<br /></p>

<blockquote>63.211.200.72&nbsp;&nbsp; 63.211.200.79&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
64.41.221.192&nbsp;&nbsp; 64.41.221.207&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
64.68.64.64&nbsp;&nbsp;&nbsp;&nbsp; 64.68.64.127&nbsp;&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
64.68.80.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64.68.95.255&nbsp;&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
64.233.160.0&nbsp;&nbsp;&nbsp; 64.233.191.255&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
66.102.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 66.102.15.255&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
66.249.64.0&nbsp;&nbsp;&nbsp;&nbsp; 66.249.95.255&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
72.14.192.0&nbsp;&nbsp;&nbsp;&nbsp; 72.14.255.255&nbsp;&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
74.125.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 74.125.255.255&nbsp; 美国 加利福尼亚州山景市谷歌公司<br />
194.221.68.0&nbsp;&nbsp;&nbsp; 194.221.68.255&nbsp; 英国 谷歌(北爱尔兰)有限公司<br />
195.249.20.0&nbsp;&nbsp;&nbsp; 195.249.20.255&nbsp; 丹麦 谷歌公司</blockquote>


<p>IP范围，然后是名称。名称为utf8编码。使用掩码表示可能更专业一些。<br /></p>

<br />


<p>写了个简单Python程序，使用二分法检索这个IP库。实际使用时启动为daemon，不用每次都加载30万条记录<br /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">socket</span><span class="o">,</span> <span class="nn">struct</span><span class="o">,</span> <span class="nn">string</span>
</span><span class='line'><span class="c"># import datetime</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">SubNetwork</span><span class="p">:</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">portion</span> <span class="o">=</span> <span class="n">p</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">m</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">n</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">portion</span><span class="p">,</span>
</span><span class='line'>      <span class="n">socket</span><span class="o">.</span><span class="n">inet_ntoa</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">portion</span><span class="p">)),</span>
</span><span class='line'>      <span class="n">socket</span><span class="o">.</span><span class="n">inet_ntoa</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)),</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">IpLibrary</span><span class="p">:</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">Find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ips</span><span class="p">):</span>
</span><span class='line'>    <span class="n">ip</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">inet_pton</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">ips</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="n">low</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">high</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="p">(</span><span class="n">low</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">):</span>
</span><span class='line'>      <span class="n">m</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span><span class="o">+</span><span class="n">high</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">None</span> <span class="c">#self.list[-1]</span>
</span><span class='line'>      <span class="n">mv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">ip</span> <span class="o">&gt;</span> <span class="n">mv</span><span class="o">.</span><span class="n">portion</span> <span class="ow">and</span> <span class="n">ip</span> <span class="o">&lt;</span> <span class="n">mv</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span class='line'><span class="c">#        print &#39;%d got (%d &lt; %d &lt; %d)&#39; % (m, mv.portion, ip, mv.end)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">mv</span>
</span><span class='line'>      <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">ip</span> <span class="o">&gt;</span> <span class="n">mv</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span class='line'>          <span class="n">low</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>          <span class="n">high</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'><span class="c">#        print &#39;%d (%d  %d)&#39; % (m, ip, mv.end)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">mv</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">Split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sep</span><span class="p">):</span>
</span><span class='line'>    <span class="n">arr</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">sep</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">i</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">!=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">ret</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">Load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span class='line'>    <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>      <span class="n">c</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
</span><span class='line'>        <span class="k">continue</span>
</span><span class='line'>      <span class="c"># &gt;I mean big-endian unsigned int</span>
</span><span class='line'>      <span class="n">p</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">inet_pton</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span class='line'>      <span class="n">m</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">inet_pton</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>      <span class="n">name</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">sn</span> <span class="o">=</span> <span class="n">SubNetwork</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c">#      if c &gt; 200:</span>
</span><span class='line'><span class="c">#        break</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">Load</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span class='line'>  <span class="k">global</span> <span class="n">_lib</span>
</span><span class='line'>  <span class="n">_lib</span><span class="o">.</span><span class="n">Load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">Query</span><span class="p">(</span><span class="n">ips</span><span class="p">):</span>
</span><span class='line'>  <span class="k">global</span> <span class="n">_lib</span>
</span><span class='line'><span class="c">#  t = datetime.datetime.now()</span>
</span><span class='line'>  <span class="n">r</span> <span class="o">=</span> <span class="n">_lib</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="n">ips</span><span class="p">)</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">r</span>
</span><span class='line'><span class="c">#  print &#39;query %s, result: %s, used: %s&#39; % (</span>
</span><span class='line'><span class="c">#    ips, r, str(datetime.datetime.now() - t))</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>  <span class="n">_lib</span><span class="o">.</span><span class="n">Load</span><span class="p">(</span><span class="s">&#39;ipsu.txt&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">Query</span><span class="p">(</span><span class="s">&#39;1.155.3.3&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">Query</span><span class="p">(</span><span class="s">&#39;0.0.3.3&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">Query</span><span class="p">(</span><span class="s">&#39;255.255.3.3&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">Query</span><span class="p">(</span><span class="s">&#39;0.0.0.0&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">Query</span><span class="p">(</span><span class="s">&#39;218.0.4.137&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">Query</span><span class="p">(</span><span class="s">&#39;218.0.5.0&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>需要注意的是，代码中的</p>

<blockquote><p>struct.unpack(&#8216;>I&#8217;, &#8230;)</p>

<p>&gt;I 的意思是 big-endian unsigned int</p></blockquote>

<p>实际使用时，基本都在30毫秒左右返回结果</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/09/sector-sphere-review/">Sector/Sphere Review</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-09T09:36:00+08:00" pubdate data-updated="true">Jun 9<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sector/Sphere 是一个分布并行计算系统，用来存储、计算天文信息。Sector 是文件系统，Sphere 是并行计算平台。<br />
其<a href="http://sector.sourceforge.net/benchmark.html">性能</a>超过了 Hadoop 一倍多。性能评测结果 <br />
其分布指分布在几个州的 rack，使用 udt 通讯。<br /></p>

<h2>特性</h2>

<ul>
<li>Master 能多份，好像得手工同步一些信息。
Master和Node能随时添加、删除</li>
<li>Sector automatically replicates files to different nodes to provide high reliability and availability. In addition, this strategy favors read-intensive scenarios since clients can read from different replicas.</li>
<li>不对大文件切分，但是每个 dataset 还是可以由多个物理文件组成，切分是application的职责。</li>
<li>流量：When Sector is running on 120 nodes, the aggregate network IO is greater than 60 Gb/s, while for Hadoop the number is only 15 Gb/s.</li>
</ul>


<p>开发了 3 年，开始并没有模仿 GFS，HDFS 等。发布了一些 Paper，最近一次发布在 2 月，SVN 在几天前也有更新。作者貌似是一个中国人。</p>

<h2>其他</h2>

<p>有 Python,Java binding<br />
测试代码较少，几乎没有<br />
C++，有严重 Java 痕迹，不算优雅，结构还过得去，能写成这样已算不错。<br />
不能跨平台<br />
有 fuse 实现<br />
管理工具可能比较少</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/08/about-dsel/">About DSEL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-08T15:06:00+08:00" pubdate data-updated="true">Feb 8<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近开始看一本老书(2004年版的): <strong>C++ Template Metaprogramming: Concepts, Tools, and Techniques from Boost and Beyond</strong>,
<a href="http://www.amazon.com/Template-Metaprogramming-Concepts-Techniques-Beyond/dp/0321227255/ref=sr_1_1?ie=UTF8&amp;amp;s=books&amp;amp;qid=1265611847&amp;amp;sr=1-1">in amazon</a>
我看的是中文版 <strong>C++模板元编程</strong>(2010年版), in <a href="http://www.amazon.cn/gp/product/B002WB1J0U/ref=ox_ya_os_product"> amazon.cn</a><br /></p>

<p>之所以想到要看这本书，是因为对模板一直有些疑问，希望籍此解决模板方面的认知错误。<br />
看到第一章，就被其讲述的<a href="http://en.wikipedia.org/wiki/Domain-specific_language">Domain Specific Language</a>吸引了，这是我的另外一个心病。<br /></p>

<p>其中一句话：</p>

<blockquote><p>最成功的DSLs通常是申诉式(declarative)语言，它为我们提供了用来描述 &#8220;what&#8221; 而不是 &#8220;how&#8221; 的符号。</p></blockquote>

<p>并讲述了一个例子: Make语言，一般的Make语法都支持<br /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='make'><span class='line'><span class="nv">OBJECTS</span> <span class="o">=</span> main.o kbd.o command.o
</span><span class='line'>edit: <span class="k">$(</span>OBJECTS<span class="k">)</span>
</span><span class='line'>main.o: main.cpp defs.h
</span><span class='line'>kbd.o: kbd.cpp defs.h command.h
</span></code></pre></td></tr></table></div></figure>


<p>其省略了how, 如</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='makefile'><span class='line'><span class="nf">main.o</span><span class="o">:</span> <span class="m">main.cpp defs.h</span>
</span><span class='line'>    c++ -c main.cpp
</span></code></pre></td></tr></table></div></figure>


<p>这几乎接近DSEL的一个理想：<b>允许一个问题仅仅个哦能通过描述可以得到解决</b>。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/05/02/collaboration-in-corp/">公司内部代码协作</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/28/high-power-smartphone/">high power smartphone</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/22/mawk-and-gawk/">mawk and gawk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/31/trivial-detail-in-facebook-messenger/">trivial detail in facebook messenger</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/23/csdn-password-leak-under/">密码泄漏事件下的冰山</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/19/question-to-a-startup-team/">Question to a Startup Team</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/11/30/digest/">Digest</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("boostguy", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/boostguy" class="twitter-follow-button" data-show-count="false">Follow @boostguy</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Ken -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'heartoutside';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
